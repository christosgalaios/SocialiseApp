import{a as n,j as e,m as r,A as E}from"./vendor-motion-CtvpaCTF.js";import{n as R,o as b,a as g,q as F,g as P,X as D,r as f,h as M,O as _,i as G,j,k as H,l as U,m as W,s as N}from"./index-C0feVM7c.js";import"./vendor-maps-DdmUqcD-.js";const q=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Y=R("link-2",q);function J(){const k=b(s=>s.user),v=b(s=>s.setUser),w=g(s=>s.setShowOrganiserSetup),p=g(s=>s.showToast),[t,u]=n.useState(0),[o,S]=n.useState(k?.name||""),[l,C]=n.useState(""),[c,O]=n.useState([]),[y,L]=n.useState({}),[d,h]=n.useState(!1),x=()=>w(!1);F(x);const z=P.filter(s=>s.id!=="All"),A=s=>{U(),O(a=>a.includes(s)?a.filter(i=>i!==s):[...a,s])},T=(s,a)=>{L(i=>({...i,[s]:a}))},B=()=>t===0?o.trim().length>=2:t===1?c.length>=1:!0,I=async()=>{if(!d){h(!0),W();try{await N.switchRole("organiser");const s=await N.updateProfile({organiserDisplayName:o.trim(),organiserBio:l.trim(),organiserCategories:c,organiserSocialLinks:Object.fromEntries(Object.entries(y).filter(([,a])=>a.trim())),organiserSetupComplete:!0});v(s),p("Welcome, organiser! Your profile is set up.","success"),x()}catch(s){p(s.message||"Failed to set up organiser profile","error")}finally{h(!1)}}},m=[{title:"Become an Organiser",subtitle:"Set up your organiser identity",desc:"This is how attendees will see you"},{title:"What do you host?",subtitle:"Pick your event categories",desc:"Select at least 1 category"},{title:"Tell people about you",subtitle:"Bio & social links",desc:"Help attendees find and trust you"}];return e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-paper flex flex-col",role:"dialog","aria-modal":"true","aria-label":"Organiser profile setup",children:[e.jsxs("div",{className:"p-6 pt-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"flex gap-2 flex-1",children:[0,1,2].map(s=>e.jsx(r.div,{className:"h-1 flex-1 rounded-full overflow-hidden bg-secondary/10",children:e.jsx(r.div,{initial:{width:0},animate:{width:s<=t?"100%":"0%"},transition:{duration:.3},className:"h-full bg-primary"})},s))}),e.jsx("button",{onPointerDown:x,className:"ml-4 w-10 h-10 rounded-full bg-secondary/10 flex items-center justify-center","aria-label":"Close",children:e.jsx(D,{size:20,className:"text-secondary/60"})})]}),e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("h1",{className:"text-3xl font-black tracking-tight text-primary mb-1",children:[m[t].title,e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("h2",{className:"text-xl font-bold text-secondary/80 mb-2",children:m[t].subtitle}),e.jsx("p",{className:"text-sm text-secondary/50",children:m[t].desc})]},t)]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",style:{overscrollBehavior:"contain"},children:e.jsxs(E,{mode:"wait",children:[t===0&&e.jsxs(r.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-24 h-24 rounded-[32px] bg-primary/10 border-2 border-primary/20 flex items-center justify-center",children:e.jsx(f,{size:40,className:"text-primary"})})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-secondary/60 uppercase tracking-widest mb-2 block",children:"Display Name"}),e.jsx("input",{type:"text",placeholder:"How attendees will see you",value:o,onChange:s=>S(s.target.value),className:"w-full bg-secondary/5 border-2 border-secondary/20 rounded-2xl px-4 py-4 text-lg font-medium text-[var(--text)] focus:outline-none focus:border-primary transition-all placeholder:text-secondary/40",maxLength:50,autoFocus:!0}),e.jsxs("p",{className:"text-[10px] text-secondary/40 mt-1 font-medium",children:[o.length,"/50 characters"]})]}),e.jsx("div",{className:"premium-card p-4 rounded-[24px]",children:e.jsx("p",{className:"text-sm text-secondary/70 font-medium leading-relaxed",children:"As an organiser, you can create events, build communities, and track your performance. You can switch back to attendee mode any time."})})]},"identity"),t===1&&e.jsx(r.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"grid grid-cols-2 gap-3",children:z.map(s=>{const a=c.includes(s.id),i=s.icon;return e.jsxs(r.button,{whileTap:{scale:.95},onClick:()=>A(s.id),className:`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all ${a?"bg-primary/10 border-primary text-primary":"bg-secondary/5 border-secondary/20 text-secondary/70 hover:border-secondary/40"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${a?"bg-primary/20":"bg-secondary/10"}`,children:i&&e.jsx(i,{size:24})}),e.jsx("span",{className:"text-sm font-bold",children:s.label}),a&&e.jsx(r.div,{initial:{scale:0},animate:{scale:1},children:e.jsx(M,{size:16,className:"text-primary"})})]},s.id)})},"categories"),t===2&&e.jsxs(r.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-secondary/60 uppercase tracking-widest mb-2 block",children:"Organiser Bio"}),e.jsx("textarea",{placeholder:"Tell people what kind of events you host and what makes them special...",value:l,onChange:s=>C(s.target.value),className:"w-full bg-secondary/5 border-2 border-secondary/20 rounded-2xl px-4 py-3 text-sm font-medium text-[var(--text)] focus:outline-none focus:border-primary transition-all placeholder:text-secondary/40 min-h-[100px] resize-none",maxLength:300,style:{overflowWrap:"break-word",wordBreak:"break-words"}}),e.jsxs("p",{className:"text-[10px] text-secondary/40 mt-1 font-medium",children:[l.length,"/300 characters"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-black text-secondary/60 uppercase tracking-widest mb-3 block",children:["Social Links ",e.jsx("span",{className:"text-secondary/30",children:"(optional)"})]}),e.jsx("div",{className:"space-y-3",children:_.map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-secondary/5 border border-secondary/10 flex items-center justify-center shrink-0",children:e.jsx(Y,{size:16,className:"text-secondary/50"})}),e.jsx("input",{type:"text",placeholder:s.placeholder,value:y[s.key]||"",onChange:a=>T(s.key,a.target.value),className:"flex-1 bg-secondary/5 border border-secondary/20 rounded-xl px-3 py-2.5 text-sm font-medium text-[var(--text)] focus:outline-none focus:border-primary transition-all placeholder:text-secondary/40"})]},s.key))})]})]},"bio-links")]})}),e.jsxs("div",{className:"p-6 pb-10 flex gap-3",children:[t>0&&e.jsx("button",{onClick:()=>{j(),u(t-1)},className:"w-14 h-14 rounded-2xl bg-secondary/10 flex items-center justify-center hover:bg-secondary/20 transition-colors","aria-label":"Go back",children:e.jsx(G,{size:24,className:"text-secondary"})}),e.jsx("button",{onClick:()=>{j(),t<2?u(t+1):I()},disabled:!B()||d,className:"flex-1 h-14 rounded-2xl bg-gradient-to-r from-primary to-accent text-white font-black uppercase tracking-widest flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98] transition-transform",children:d?e.jsx(r.div,{animate:{rotate:360},transition:{repeat:1/0,duration:.8,ease:"linear"},className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full"}):t<2?e.jsxs(e.Fragment,{children:["Continue",e.jsx(H,{size:20})]}):e.jsxs(e.Fragment,{children:["Start Organising",e.jsx(f,{size:20})]})})]})]})}export{J as default};
