import{a as o,j as e,m as i,A as P}from"./vendor-motion-CtvpaCTF.js";import{o as g,a as b,G as D,g as U,O as j,X as G,v as N,h as M,i as W,j as v,k as H,l as Y,m as _,s as k}from"./index-DRe49dfy.js";import{L as K}from"./link-2-IoEgj9gk.js";import"./vendor-maps-DdmUqcD-.js";function V(){const w=g(s=>s.user),S=g(s=>s.setUser),C=b(s=>s.setShowOrganiserSetup),p=b(s=>s.showToast),[a,h]=o.useState(0),[c,O]=o.useState(w?.name||""),[n,L]=o.useState(""),[l,z]=o.useState([]),[d,E]=o.useState({}),[x,y]=o.useState(!1),m=()=>C(!1);D(m);const T=U.filter(s=>s.id!=="All"),A=s=>{Y(),z(t=>t.includes(s)?t.filter(r=>r!==s):[...t,s])},B=(s,t)=>{E(r=>({...r,[s]:t}))},I=(s,t)=>{if(!t?.trim())return null;const r=t.trim();if(s==="website"){if(!/^https?:\/\/.+\..+/.test(r))return"Enter a valid URL (https://...)"}else if(/\s/.test(r))return"Usernames cannot contain spaces";return null},f=j.reduce((s,t)=>{const r=I(t.key,d[t.key]);return r&&(s[t.key]=r),s},{}),R=Object.keys(f).length>0,$=()=>a===0?c.trim().length>=2:a===1?l.length>=1:a===2?!R:!0,F=async()=>{if(!x){y(!0),_();try{await k.switchRole("organiser");const s=await k.updateProfile({organiserDisplayName:c.trim(),organiserBio:n.trim(),organiserCategories:l,organiserSocialLinks:Object.fromEntries(Object.entries(d).filter(([,t])=>t.trim())),organiserSetupComplete:!0});S(s),p("Welcome, organiser! Your profile is set up.","success"),m()}catch(s){p(s.message||"Failed to set up organiser profile","error")}finally{y(!1)}}},u=[{title:"Become an Organiser",subtitle:"Set up your organiser identity",desc:"This is how attendees will see you"},{title:"What do you host?",subtitle:"Pick your event categories",desc:"Select at least 1 category"},{title:"Tell people about you",subtitle:"Bio & social links",desc:"Help attendees find and trust you"}];return e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-paper flex flex-col",role:"dialog","aria-modal":"true","aria-label":"Organiser profile setup",children:[e.jsxs("div",{className:"p-6 pt-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"flex gap-2 flex-1",children:["Identity","Categories","Details"].map((s,t)=>e.jsxs("div",{className:"flex-1",children:[e.jsx(i.div,{className:"h-1.5 rounded-full overflow-hidden bg-secondary/10",children:e.jsx(i.div,{initial:{width:0},animate:{width:t<=a?"100%":"0%"},transition:{duration:.3},className:"h-full bg-primary rounded-full"})}),e.jsx("p",{className:`text-[8px] font-bold uppercase tracking-widest mt-1 text-center transition-colors ${t<=a?"text-primary":"text-secondary/30"}`,children:s})]},t))}),e.jsx("button",{onPointerDown:m,className:"ml-4 w-10 h-10 rounded-full bg-secondary/10 flex items-center justify-center","aria-label":"Close",children:e.jsx(G,{size:20,className:"text-secondary/60"})})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("h1",{className:"text-3xl font-black tracking-tight text-primary mb-1",children:[u[a].title,e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("h2",{className:"text-xl font-bold text-secondary/80 mb-2",children:u[a].subtitle}),e.jsx("p",{className:"text-sm text-secondary/50",children:u[a].desc})]},a)]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",style:{overscrollBehavior:"contain"},children:e.jsxs(P,{mode:"wait",children:[a===0&&e.jsxs(i.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-24 h-24 rounded-[32px] bg-primary/10 border-2 border-primary/20 flex items-center justify-center",children:e.jsx(N,{size:40,className:"text-primary"})})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-secondary/60 uppercase tracking-widest mb-2 block",children:"Display Name"}),e.jsx("input",{type:"text",placeholder:"How attendees will see you",value:c,onChange:s=>O(s.target.value),className:"w-full bg-secondary/5 border-2 border-secondary/20 rounded-2xl px-4 py-4 text-lg font-medium text-[var(--text)] focus:outline-none focus:border-primary transition-all placeholder:text-secondary/40",maxLength:50,autoFocus:!0}),e.jsxs("p",{className:"text-[10px] text-secondary/40 mt-1 font-medium",children:[c.length,"/50 characters"]})]}),e.jsx("div",{className:"premium-card p-4 rounded-[24px]",children:e.jsx("p",{className:"text-sm text-secondary/70 font-medium leading-relaxed",children:"As an organiser, you can create events, build communities, and track your performance. You can switch back to attendee mode any time."})})]},"identity"),a===1&&e.jsxs(i.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-[10px] font-bold text-secondary/40",children:"Tap to select"}),e.jsxs(i.span,{initial:{scale:1.3},animate:{scale:1},className:`text-[10px] font-black px-2 py-0.5 rounded-full ${l.length>=1?"text-green-600 bg-green-500/10":"text-secondary/40 bg-secondary/5"}`,children:[l.length," selected"]},l.length)]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:T.map(s=>{const t=l.includes(s.id),r=s.icon;return e.jsxs(i.button,{whileTap:{scale:.95},onClick:()=>A(s.id),className:`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all ${t?"bg-primary/10 border-primary text-primary":"bg-secondary/5 border-secondary/20 text-secondary/70 hover:border-secondary/40"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${t?"bg-primary/20":"bg-secondary/10"}`,children:r&&e.jsx(r,{size:24})}),e.jsx("span",{className:"text-sm font-bold",children:s.label}),t&&e.jsx(i.div,{initial:{scale:0},animate:{scale:1},children:e.jsx(M,{size:16,className:"text-primary"})})]},s.id)})})]},"categories"),a===2&&e.jsxs(i.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-secondary/60 uppercase tracking-widest mb-2 block",children:"Organiser Bio"}),e.jsx("textarea",{placeholder:"Tell people what kind of events you host and what makes them special...",value:n,onChange:s=>L(s.target.value),className:"w-full bg-secondary/5 border-2 border-secondary/20 rounded-2xl px-4 py-3 text-sm font-medium text-[var(--text)] focus:outline-none focus:border-primary transition-all placeholder:text-secondary/40 min-h-[100px] resize-none",maxLength:300,style:{overflowWrap:"break-word",wordBreak:"break-words"}}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex-1 h-0.5 bg-secondary/10 rounded-full overflow-hidden",children:e.jsx(i.div,{className:`h-full rounded-full ${n.length>250?"bg-amber-500/60":"bg-primary/40"}`,animate:{width:`${Math.min(n.length/300*100,100)}%`},transition:{duration:.2}})}),e.jsxs("span",{className:`text-[10px] font-bold ${n.length>250?"text-amber-500":"text-secondary/40"}`,children:[n.length,"/300"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-black text-secondary/60 uppercase tracking-widest mb-3 block",children:["Social Links ",e.jsx("span",{className:"text-secondary/30",children:"(optional)"})]}),e.jsx("div",{className:"space-y-3",children:j.map(s=>{const t=f[s.key];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-secondary/5 border border-secondary/10 flex items-center justify-center shrink-0",children:e.jsx(K,{size:16,className:"text-secondary/50"})}),e.jsx("input",{type:"text",placeholder:s.placeholder,value:d[s.key]||"",onChange:r=>B(s.key,r.target.value),className:`flex-1 bg-secondary/5 border rounded-xl px-3 py-2.5 text-sm font-medium text-[var(--text)] focus:outline-none transition-all placeholder:text-secondary/40 ${t?"border-red-400 focus:border-red-500":"border-secondary/20 focus:border-primary"}`})]}),t&&e.jsx("p",{className:"text-[10px] text-red-500/70 mt-0.5 ml-[52px] font-medium",children:t})]},s.key)})})]})]},"bio-links")]})}),e.jsxs("div",{className:"p-6 pb-10 flex gap-3",children:[a>0&&e.jsx("button",{onClick:()=>{v(),h(a-1)},className:"w-14 h-14 rounded-2xl bg-secondary/10 flex items-center justify-center hover:bg-secondary/20 transition-colors","aria-label":"Go back",children:e.jsx(W,{size:24,className:"text-secondary"})}),e.jsx("button",{onClick:()=>{v(),a<2?h(a+1):F()},disabled:!$()||x,className:"flex-1 h-14 rounded-2xl bg-gradient-to-r from-primary to-accent text-white font-black uppercase tracking-widest flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98] transition-transform",children:x?e.jsx(i.div,{animate:{rotate:360},transition:{repeat:1/0,duration:.8,ease:"linear"},className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full"}):a<2?e.jsxs(e.Fragment,{children:["Continue",e.jsx(H,{size:20})]}):e.jsxs(e.Fragment,{children:["Start Organising",e.jsx(N,{size:20})]})})]})]})}export{V as default};
