import{a as c,j as e,A as R,m as i}from"./vendor-motion-CtvpaCTF.js";import{n as te,a as v,q as M,r as L,G as ae,I as re,J as ne,s as D,O as le,X as ie,j as d,D as oe,v as F,z as ce,K as de,l as xe,t as p,C as me,U as I,L as pe,N as he,k as w,g as ge,x as ue,A as B,Q as fe}from"./index-Bbd_1pDH.js";import{S as be,T as ye,G as je,H as ve}from"./trending-up-Dl3SBlJH.js";import"./vendor-maps-DdmUqcD-.js";const Ne=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],we=te("external-link",Ne),x=n=>({initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{type:"spring",damping:25,stiffness:400,delay:n*.06}}),ke={instagram:n=>`https://instagram.com/${n.replace(/^@/,"")}`,tiktok:n=>`https://tiktok.com/@${n.replace(/^@/,"")}`,twitter:n=>`https://x.com/${n.replace(/^@/,"")}`,website:n=>n.startsWith("http")?n:`https://${n}`},U={instagram:{color:"text-pink-600",bg:"bg-pink-500/5",border:"border-pink-500/10",hoverBg:"hover:bg-pink-500/10"},tiktok:{color:"text-secondary",bg:"bg-secondary/5",border:"border-secondary/10",hoverBg:"hover:bg-secondary/10"},twitter:{color:"text-sky-500",bg:"bg-sky-500/5",border:"border-sky-500/10",hoverBg:"hover:bg-sky-500/10"},website:{color:"text-primary",bg:"bg-primary/5",border:"border-primary/10",hoverBg:"hover:bg-primary/10"}};function Te(){const n=v(s=>s.showOrganiserProfile),_=v(s=>s.setShowOrganiserProfile),g=v(s=>s.showToast),k=M(s=>s.setSelectedEvent),S=M(s=>s.events),G=L(s=>s.setSelectedTribe),V=L(s=>s.communities),C=v(s=>s.setShowOrganiserReview),[t,q]=c.useState(null),[H,E]=c.useState(!0),[h,K]=c.useState(!1),[u,Y]=c.useState("upcoming"),[m,$]=c.useState(null),f=()=>_(null);ae(f);const J=re(!!n),{sheetY:Q,handleProps:W}=ne(f);c.useEffect(()=>{if(!n)return;let s=!1;return E(!0),$(null),Promise.all([D.getOrganiserProfile(n),D.getOrganiserReviews(n).catch(()=>null)]).then(([a,r])=>{s||(q(a),r&&$(r))}).catch(a=>{s||g(a.message||"Failed to load profile","error")}).finally(()=>{s||E(!1)}),()=>{s=!0}},[n]);const{upcomingEvents:T,pastEvents:z}=c.useMemo(()=>{if(!t?.events)return{upcomingEvents:[],pastEvents:[]};const s=new Date,a=[],r=[];return t.events.forEach(o=>{const A=new Date(o.date);A>=s||isNaN(A.getTime())?a.push(o):r.push(o)}),{upcomingEvents:a,pastEvents:r}},[t]),l=c.useMemo(()=>t?.events?.length?[...t.events].sort((s,a)=>{const r=s.spots>0?s.attendees/s.spots:0;return(a.spots>0?a.attendees/a.spots:0)-r})[0]:null,[t]),b=c.useMemo(()=>{const s=t?.events?.length??0;return s>=20?{label:"Gold Organiser",color:"text-amber-500",bg:"bg-amber-500/10",border:"border-amber-500/20"}:s>=5?{label:"Silver Organiser",color:"text-slate-400",bg:"bg-slate-400/10",border:"border-slate-400/20"}:{label:"Organiser",color:"text-accent",bg:"bg-accent/10",border:"border-accent/20"}},[t]);if(!n)return null;const N=t?.organiserSocialLinks||{},O=le.filter(s=>N[s.key]?.trim()),y=t?.events?.length??0,X=t?.communities?.length??0,Z=t?.communities?.reduce((s,a)=>s+(a.members??0),0)??0,j=y>0?Math.round(t.events.reduce((s,a)=>s+(a.spots>0?a.attendees/a.spots*100:0),0)/y):0,ee=t?.events?.reduce((s,a)=>s+(a.attendees??0),0)??0,P=u==="upcoming"?T:z,se=()=>{d(),p();const s=`${window.location.origin}${window.location.pathname}?organiser=${n}`;navigator.clipboard?.writeText(s).then(()=>g("Profile link copied!","success")).catch(()=>g("Could not copy link","error"))};return e.jsx(R,{children:n&&e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-secondary/60 backdrop-blur-sm flex items-end md:items-center justify-center",onPointerDown:s=>{s.target===s.currentTarget&&f()},children:e.jsxs(i.div,{ref:J,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:400},style:{y:Q},className:"bg-paper rounded-t-[32px] md:rounded-[32px] w-full md:max-w-lg max-h-[85vh] overflow-hidden flex flex-col",role:"dialog","aria-modal":"true","aria-label":"Organiser profile",children:[e.jsx("div",{...W,className:"flex justify-center pt-3 pb-2 cursor-grab active:cursor-grabbing",children:e.jsx("div",{className:"w-10 h-1 bg-secondary/20 rounded-full"})}),e.jsxs("div",{className:"px-6 pb-4 flex items-center justify-between border-b border-secondary/10",children:[e.jsx("h2",{className:"text-lg font-black text-secondary",children:"Organiser Profile"}),e.jsx("button",{onPointerDown:()=>{d(),f()},className:"w-10 h-10 rounded-full bg-secondary/10 flex items-center justify-center","aria-label":"Close",children:e.jsx(ie,{size:20,className:"text-secondary/60"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",style:{overscrollBehavior:"contain"},children:H?e.jsxs("div",{className:"p-6 space-y-4 animate-pulse",children:[e.jsx("div",{className:"h-24 rounded-2xl bg-secondary/10"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-[24px] bg-secondary/10"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-5 w-32 bg-secondary/10 rounded-full"}),e.jsx("div",{className:"h-3 w-20 bg-secondary/10 rounded-full"})]})]}),e.jsx("div",{className:"h-16 bg-secondary/10 rounded-2xl"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("div",{className:"h-16 bg-secondary/10 rounded-2xl"}),e.jsx("div",{className:"h-16 bg-secondary/10 rounded-2xl"}),e.jsx("div",{className:"h-16 bg-secondary/10 rounded-2xl"})]}),e.jsx("div",{className:"h-32 bg-secondary/10 rounded-2xl"})]}):t?e.jsxs("div",{children:[t.organiserCoverPhoto&&e.jsx("div",{className:"h-28 overflow-hidden",children:e.jsx("img",{src:t.organiserCoverPhoto,className:"w-full h-full object-cover",alt:"",loading:"lazy"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-20 h-20 rounded-[24px] overflow-hidden border-2 border-primary/20 shadow-lg shrink-0 ${t.organiserCoverPhoto?"-mt-10 relative z-10 ring-4 ring-paper":""}`,children:e.jsx("img",{src:t.avatar||oe,className:"w-full h-full object-cover",alt:"",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-xl font-black text-secondary truncate",children:t.organiserDisplayName||t.name}),t.organiserVerified&&e.jsx("span",{className:"text-[10px] font-black text-primary bg-primary/10 px-2 py-0.5 rounded-full border border-primary/20",children:"Verified"})]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full ${b.bg} border ${b.border} text-[9px] font-black ${b.color} uppercase tracking-widest`,children:[e.jsx(F,{size:9}),b.label]})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{xe(),p(),K(!h),g(h?"Unfollowed organiser":"Following organiser!",h?"info":"success")},className:`flex-1 py-3 rounded-2xl font-black text-sm flex items-center justify-center gap-2 transition-all active:scale-[0.98] ${h?"bg-secondary/5 border-2 border-secondary/20 text-secondary":"bg-gradient-to-r from-primary to-accent text-white shadow-lg"}`,children:[h?e.jsx(ce,{size:18}):e.jsx(de,{size:18}),h?"Following":"Follow"]}),e.jsx("button",{onClick:se,className:"w-12 py-3 rounded-2xl bg-secondary/5 border-2 border-secondary/20 flex items-center justify-center hover:bg-secondary/10 transition-colors","aria-label":"Share profile",children:e.jsx(be,{size:18,className:"text-secondary/60"})})]}),(t.organiserBio||t.bio)&&e.jsx("div",{className:"premium-card p-4 rounded-[20px]",children:e.jsx("p",{className:"text-sm text-secondary/70 font-medium leading-relaxed",children:t.organiserBio||t.bio})}),e.jsx(i.div,{...x(1),className:"grid grid-cols-2 gap-2",children:[{icon:me,value:y,label:"Events",color:"text-primary",bg:"bg-primary/5"},{icon:I,value:ee,label:"Attendees",color:"text-accent",bg:"bg-accent/5"},{icon:pe,value:X,label:"Communities",color:"text-secondary",bg:"bg-secondary/5"},{icon:I,value:Z,label:"Members",color:"text-teal-600",bg:"bg-teal-500/5"}].map((s,a)=>e.jsxs("div",{className:`p-3 rounded-2xl ${s.bg} border border-secondary/10`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s.icon,{size:14,className:s.color}),e.jsx(i.span,{className:"text-lg font-black text-secondary",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{type:"spring",damping:20,stiffness:300,delay:.1+a*.05},children:s.value})]}),e.jsx("p",{className:"text-[9px] font-bold text-secondary/40 uppercase tracking-widest mt-0.5",children:s.label})]},s.label))}),y>0&&e.jsxs(i.div,{...x(2),className:"flex items-center justify-between p-3 rounded-2xl bg-primary/5 border border-primary/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{size:14,className:"text-primary"}),e.jsx("span",{className:"text-[11px] font-bold text-secondary",children:"Avg Fill Rate"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-1.5 bg-secondary/10 rounded-full overflow-hidden",children:e.jsx(i.div,{className:`h-full rounded-full ${j>=70?"bg-accent":"bg-primary"}`,initial:{width:0},animate:{width:`${Math.min(j,100)}%`},transition:{duration:.6,ease:"easeOut",delay:.3}})}),e.jsxs("span",{className:`text-sm font-black ${j>=70?"text-accent":"text-primary"}`,children:[j,"%"]})]})]}),l&&(()=>{const s=l.spots>0?Math.round(l.attendees/l.spots*100):0;return e.jsxs("button",{onClick:()=>{const a=S.find(r=>r.id===l.id)||l;d(),p(),k(a)},className:"w-full premium-card p-4 rounded-[20px] relative overflow-hidden text-left hover:bg-secondary/5 transition-colors",children:[e.jsx("div",{className:"absolute -right-4 -top-4 w-16 h-16 bg-accent/5 rounded-full blur-2xl"}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(he,{size:12,className:"text-accent"}),e.jsx("span",{className:"text-[9px] font-black text-accent uppercase tracking-widest",children:"Top Event"})]}),e.jsxs("span",{className:`text-[10px] font-black ${s>=80?"text-accent":"text-primary"}`,children:[s,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden bg-secondary/10 shrink-0",children:l.image&&e.jsx("img",{src:l.image,className:"w-full h-full object-cover",alt:"",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-secondary truncate",children:l.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("span",{className:"text-[10px] text-secondary/40",children:[l.attendees,"/",l.spots," spots"]}),l.category&&e.jsx("span",{className:"text-[9px] font-bold text-primary/50 bg-primary/5 px-1.5 py-0.5 rounded-full",children:l.category})]}),e.jsx("div",{className:"w-full h-1 bg-secondary/10 rounded-full mt-1.5 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${s>=100?"bg-red-500":s>=80?"bg-accent":"bg-primary/50"}`,style:{width:`${Math.min(s,100)}%`}})})]}),e.jsx(w,{size:14,className:"text-secondary/30 shrink-0"})]})]})})(),O.length>0&&e.jsxs(i.div,{...x(3),children:[e.jsxs("h4",{className:"text-xs font-black text-primary uppercase tracking-widest mb-3",children:["Connect",e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(s=>{const a=ke[s.key]?.(N[s.key]),r=U[s.key]||U.website;return e.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border text-[11px] font-bold transition-all group ${r.bg} ${r.border} ${r.color} ${r.hoverBg}`,children:[e.jsx(je,{size:10}),e.jsx("span",{className:"capitalize text-[9px] font-black opacity-50 mr-0.5",children:s.key}),N[s.key],e.jsx(we,{size:8,className:"opacity-0 group-hover:opacity-100 transition-opacity"})]},s.key)})})]}),t.organiserCategories?.length>0&&e.jsxs(i.div,{...x(4),children:[e.jsxs("h4",{className:"text-xs font-black text-primary uppercase tracking-widest mb-3",children:["Hosts",e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.organiserCategories.map(s=>{const a=ge.find(o=>o.id===s),r=a?.icon;return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 rounded-full border border-primary/20 text-[11px] font-bold text-primary",children:[r&&e.jsx(r,{size:12}),a?.label||s]},s)})})]}),t.events?.length>0&&e.jsxs(i.div,{...x(5),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-xs font-black text-primary uppercase tracking-widest",children:["Events",e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("div",{className:"flex gap-1",children:[{key:"upcoming",label:"Upcoming",icon:ue,count:T.length},{key:"past",label:"Past",icon:ve,count:z.length}].map(s=>e.jsxs("button",{onClick:()=>{d(),Y(s.key)},className:`flex items-center gap-1 px-2 py-1 rounded-lg text-[10px] font-bold transition-all ${u===s.key?"bg-primary/10 text-primary":"text-secondary/40 hover:text-secondary/60"}`,children:[e.jsx(s.icon,{size:10}),s.label," (",s.count,")"]},s.key))})]}),e.jsx(R,{mode:"wait",children:e.jsx(i.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.12},className:"space-y-2",children:P.length>0?P.map(s=>{const a=s.spots>0?Math.round(s.attendees/s.spots*100):0;return e.jsxs("button",{onClick:()=>{const r=S.find(o=>o.id===s.id)||s;d(),p(),k(r)},className:"w-full flex items-center gap-3 p-3 rounded-2xl bg-secondary/5 border border-secondary/10 hover:bg-secondary/10 transition-colors text-left",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl overflow-hidden bg-secondary/10 shrink-0",children:s.image&&e.jsx("img",{src:s.image,className:"w-full h-full object-cover",alt:"",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-secondary truncate",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[e.jsx("span",{className:"text-[10px] text-secondary/40 font-medium",children:s.date}),e.jsxs("span",{className:`text-[10px] font-bold ${a>=80?"text-accent":"text-primary"}`,children:[s.attendees,"/",s.spots," spots"]}),s.category&&e.jsx("span",{className:"text-[9px] font-bold text-primary/50 bg-primary/5 px-1.5 py-0.5 rounded-full",children:s.category}),parseFloat(s.price)>0&&e.jsxs("span",{className:"text-[9px] font-bold text-green-600",children:["$",s.price]})]}),e.jsx("div",{className:"w-full h-1 bg-secondary/10 rounded-full mt-1.5 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${a>=100?"bg-red-500":a>=80?"bg-accent":"bg-primary/50"}`,style:{width:`${Math.min(a,100)}%`}})})]}),e.jsx(w,{size:14,className:"text-secondary/30 shrink-0"})]},s.id)}):e.jsxs("p",{className:"text-center py-4 text-[11px] text-secondary/40 font-medium",children:["No ",u," events"]})},u)})]}),t.communities?.length>0&&e.jsxs(i.div,{...x(6),children:[e.jsxs("h4",{className:"text-xs font-black text-primary uppercase tracking-widest mb-3",children:["Communities",e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("div",{className:"space-y-2",children:t.communities.map(s=>{const a=V.find(r=>r.id===s.id)||s;return e.jsxs("button",{onClick:()=>{d(),p(),G(a)},className:"w-full flex items-center gap-3 p-3 rounded-2xl bg-secondary/5 border border-secondary/10 hover:bg-secondary/10 transition-colors text-left",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-secondary/10 shrink-0 flex items-center justify-center text-base",children:s.avatar||"ðŸ˜ï¸"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-secondary truncate",children:s.name}),s.description&&e.jsx("p",{className:"text-[10px] text-secondary/40 truncate",children:s.description}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[e.jsxs("span",{className:"text-[10px] text-secondary/40",children:[s.members??0," members"]}),s.category&&e.jsx("span",{className:"text-[9px] font-bold text-primary/50 bg-primary/5 px-1.5 py-0.5 rounded-full",children:s.category})]})]}),e.jsx(w,{size:14,className:"text-secondary/30 shrink-0"})]},s.id)})})]}),m&&m.topTags?.length>0&&e.jsxs(i.div,{...x(7),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-xs font-black text-primary uppercase tracking-widest",children:["Vibes",e.jsx("span",{className:"text-accent",children:"."})]}),e.jsxs("button",{onClick:()=>{d(),p(),C({organiserId:n,organiserName:t?.organiserDisplayName||t?.name})},className:"text-[10px] font-bold text-primary hover:text-accent transition-colors flex items-center gap-1",children:[e.jsx(B,{size:10}),"Leave a review"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.topTags.map(({tag:s,count:a})=>{const r=fe.find(o=>o.id===s);return r?e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-[11px] font-bold border ${r.color}`,children:[e.jsx("span",{children:r.emoji}),r.label,a>1&&e.jsx("span",{className:"ml-0.5 text-[9px] font-black opacity-60",children:a})]},s):null})}),e.jsxs("p",{className:"text-[10px] text-secondary/30 font-medium mt-2",children:[m.totalReviews," ",m.totalReviews===1?"review":"reviews"]})]}),m&&m.topTags?.length===0&&e.jsx(i.div,{...x(7),children:e.jsxs("button",{onClick:()=>{d(),p(),C({organiserId:n,organiserName:t?.organiserDisplayName||t?.name})},className:"w-full p-4 rounded-2xl bg-primary/5 border border-primary/10 hover:bg-primary/10 transition-colors text-center",children:[e.jsx(B,{size:20,className:"text-primary mx-auto mb-1.5"}),e.jsx("p",{className:"text-sm font-bold text-secondary",children:"Leave a vibe review"}),e.jsx("p",{className:"text-[10px] text-secondary/40 font-medium mt-0.5",children:"Share your experience with this organiser"})]})}),!t.events?.length&&!t.communities?.length&&e.jsxs("div",{className:"text-center py-6",children:[e.jsx(F,{size:32,className:"text-secondary/20 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-secondary/40 font-medium",children:"This organiser hasn't hosted anything yet"})]})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-sm text-secondary/40",children:"Profile not found"})})})]})})})}export{Te as default};
