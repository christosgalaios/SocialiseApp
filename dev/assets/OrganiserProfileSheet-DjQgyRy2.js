import{a as c,j as e,A as P,m as i}from"./vendor-motion-CtvpaCTF.js";import{n as X,a as v,q as O,r as A,G as Q,I as Z,J as ee,s as se,O as te,X as ae,j as x,D as re,v as M,z as ne,K as le,l as ie,t as p,C as oe,U as F,L as ce,N as de,k as N,g as xe,x as me}from"./index-BOj11MUg.js";import{S as pe,T as he,G as ge,H as ue}from"./trending-up-CrfT41j1.js";import"./vendor-maps-DdmUqcD-.js";const fe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ye=X("external-link",fe),m=r=>({initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{type:"spring",damping:25,stiffness:400,delay:r*.06}}),be={instagram:r=>`https://instagram.com/${r.replace(/^@/,"")}`,tiktok:r=>`https://tiktok.com/@${r.replace(/^@/,"")}`,twitter:r=>`https://x.com/${r.replace(/^@/,"")}`,website:r=>r.startsWith("http")?r:`https://${r}`},L={instagram:{color:"text-pink-600",bg:"bg-pink-500/5",border:"border-pink-500/10",hoverBg:"hover:bg-pink-500/10"},tiktok:{color:"text-secondary",bg:"bg-secondary/5",border:"border-secondary/10",hoverBg:"hover:bg-secondary/10"},twitter:{color:"text-sky-500",bg:"bg-sky-500/5",border:"border-sky-500/10",hoverBg:"hover:bg-sky-500/10"},website:{color:"text-primary",bg:"bg-primary/5",border:"border-primary/10",hoverBg:"hover:bg-primary/10"}};function ke(){const r=v(s=>s.showOrganiserProfile),U=v(s=>s.setShowOrganiserProfile),h=v(s=>s.showToast),w=O(s=>s.setSelectedEvent),k=O(s=>s.events),B=A(s=>s.setSelectedTribe),R=A(s=>s.communities),[a,I]=c.useState(null),[D,C]=c.useState(!0),[d,_]=c.useState(!1),[g,G]=c.useState("upcoming"),u=()=>U(null);Q(u);const q=Z(!!r),{sheetY:H,handleProps:V}=ee(u);c.useEffect(()=>{if(!r)return;let s=!1;return C(!0),se.getOrganiserProfile(r).then(t=>{s||I(t)}).catch(t=>{s||h(t.message||"Failed to load profile","error")}).finally(()=>{s||C(!1)}),()=>{s=!0}},[r]);const{upcomingEvents:S,pastEvents:E}=c.useMemo(()=>{if(!a?.events)return{upcomingEvents:[],pastEvents:[]};const s=new Date,t=[],n=[];return a.events.forEach(o=>{const T=new Date(o.date);T>=s||isNaN(T.getTime())?t.push(o):n.push(o)}),{upcomingEvents:t,pastEvents:n}},[a]),l=c.useMemo(()=>a?.events?.length?[...a.events].sort((s,t)=>{const n=s.spots>0?s.attendees/s.spots:0;return(t.spots>0?t.attendees/t.spots:0)-n})[0]:null,[a]),f=c.useMemo(()=>{const s=a?.events?.length??0;return s>=20?{label:"Gold Organiser",color:"text-amber-500",bg:"bg-amber-500/10",border:"border-amber-500/20"}:s>=5?{label:"Silver Organiser",color:"text-slate-400",bg:"bg-slate-400/10",border:"border-slate-400/20"}:{label:"Organiser",color:"text-accent",bg:"bg-accent/10",border:"border-accent/20"}},[a]);if(!r)return null;const j=a?.organiserSocialLinks||{},$=te.filter(s=>j[s.key]?.trim()),y=a?.events?.length??0,K=a?.communities?.length??0,Y=a?.communities?.reduce((s,t)=>s+(t.members??0),0)??0,b=y>0?Math.round(a.events.reduce((s,t)=>s+(t.spots>0?t.attendees/t.spots*100:0),0)/y):0,J=a?.events?.reduce((s,t)=>s+(t.attendees??0),0)??0,z=g==="upcoming"?S:E,W=()=>{x(),p();const s=`${window.location.origin}${window.location.pathname}?organiser=${r}`;navigator.clipboard?.writeText(s).then(()=>h("Profile link copied!","success")).catch(()=>h("Could not copy link","error"))};return e.jsx(P,{children:r&&e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-secondary/60 backdrop-blur-sm flex items-end md:items-center justify-center",onPointerDown:s=>{s.target===s.currentTarget&&u()},children:e.jsxs(i.div,{ref:q,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:400},style:{y:H},className:"bg-paper rounded-t-[32px] md:rounded-[32px] w-full md:max-w-lg max-h-[85vh] overflow-hidden flex flex-col",role:"dialog","aria-modal":"true","aria-label":"Organiser profile",children:[e.jsx("div",{...V,className:"flex justify-center pt-3 pb-2 cursor-grab active:cursor-grabbing",children:e.jsx("div",{className:"w-10 h-1 bg-secondary/20 rounded-full"})}),e.jsxs("div",{className:"px-6 pb-4 flex items-center justify-between border-b border-secondary/10",children:[e.jsx("h2",{className:"text-lg font-black text-secondary",children:"Organiser Profile"}),e.jsx("button",{onPointerDown:()=>{x(),u()},className:"w-10 h-10 rounded-full bg-secondary/10 flex items-center justify-center","aria-label":"Close",children:e.jsx(ae,{size:20,className:"text-secondary/60"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",style:{overscrollBehavior:"contain"},children:D?e.jsxs("div",{className:"p-6 space-y-4 animate-pulse",children:[e.jsx("div",{className:"h-24 rounded-2xl bg-secondary/10"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-[24px] bg-secondary/10"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-5 w-32 bg-secondary/10 rounded-full"}),e.jsx("div",{className:"h-3 w-20 bg-secondary/10 rounded-full"})]})]}),e.jsx("div",{className:"h-16 bg-secondary/10 rounded-2xl"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("div",{className:"h-16 bg-secondary/10 rounded-2xl"}),e.jsx("div",{className:"h-16 bg-secondary/10 rounded-2xl"}),e.jsx("div",{className:"h-16 bg-secondary/10 rounded-2xl"})]}),e.jsx("div",{className:"h-32 bg-secondary/10 rounded-2xl"})]}):a?e.jsxs("div",{children:[a.organiserCoverPhoto&&e.jsx("div",{className:"h-28 overflow-hidden",children:e.jsx("img",{src:a.organiserCoverPhoto,className:"w-full h-full object-cover",alt:"",loading:"lazy"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-20 h-20 rounded-[24px] overflow-hidden border-2 border-primary/20 shadow-lg shrink-0 ${a.organiserCoverPhoto?"-mt-10 relative z-10 ring-4 ring-paper":""}`,children:e.jsx("img",{src:a.avatar||re,className:"w-full h-full object-cover",alt:"",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-xl font-black text-secondary truncate",children:a.organiserDisplayName||a.name}),a.organiserVerified&&e.jsx("span",{className:"text-[10px] font-black text-primary bg-primary/10 px-2 py-0.5 rounded-full border border-primary/20",children:"Verified"})]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full ${f.bg} border ${f.border} text-[9px] font-black ${f.color} uppercase tracking-widest`,children:[e.jsx(M,{size:9}),f.label]})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{ie(),p(),_(!d),h(d?"Unfollowed organiser":"Following organiser!",d?"info":"success")},className:`flex-1 py-3 rounded-2xl font-black text-sm flex items-center justify-center gap-2 transition-all active:scale-[0.98] ${d?"bg-secondary/5 border-2 border-secondary/20 text-secondary":"bg-gradient-to-r from-primary to-accent text-white shadow-lg"}`,children:[d?e.jsx(ne,{size:18}):e.jsx(le,{size:18}),d?"Following":"Follow"]}),e.jsx("button",{onClick:W,className:"w-12 py-3 rounded-2xl bg-secondary/5 border-2 border-secondary/20 flex items-center justify-center hover:bg-secondary/10 transition-colors","aria-label":"Share profile",children:e.jsx(pe,{size:18,className:"text-secondary/60"})})]}),(a.organiserBio||a.bio)&&e.jsx("div",{className:"premium-card p-4 rounded-[20px]",children:e.jsx("p",{className:"text-sm text-secondary/70 font-medium leading-relaxed",children:a.organiserBio||a.bio})}),e.jsx(i.div,{...m(1),className:"grid grid-cols-2 gap-2",children:[{icon:oe,value:y,label:"Events",color:"text-primary",bg:"bg-primary/5"},{icon:F,value:J,label:"Attendees",color:"text-accent",bg:"bg-accent/5"},{icon:ce,value:K,label:"Communities",color:"text-secondary",bg:"bg-secondary/5"},{icon:F,value:Y,label:"Members",color:"text-teal-600",bg:"bg-teal-500/5"}].map((s,t)=>e.jsxs("div",{className:`p-3 rounded-2xl ${s.bg} border border-secondary/10`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s.icon,{size:14,className:s.color}),e.jsx(i.span,{className:"text-lg font-black text-secondary",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{type:"spring",damping:20,stiffness:300,delay:.1+t*.05},children:s.value})]}),e.jsx("p",{className:"text-[9px] font-bold text-secondary/40 uppercase tracking-widest mt-0.5",children:s.label})]},s.label))}),y>0&&e.jsxs(i.div,{...m(2),className:"flex items-center justify-between p-3 rounded-2xl bg-primary/5 border border-primary/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{size:14,className:"text-primary"}),e.jsx("span",{className:"text-[11px] font-bold text-secondary",children:"Avg Fill Rate"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-1.5 bg-secondary/10 rounded-full overflow-hidden",children:e.jsx(i.div,{className:`h-full rounded-full ${b>=70?"bg-accent":"bg-primary"}`,initial:{width:0},animate:{width:`${Math.min(b,100)}%`},transition:{duration:.6,ease:"easeOut",delay:.3}})}),e.jsxs("span",{className:`text-sm font-black ${b>=70?"text-accent":"text-primary"}`,children:[b,"%"]})]})]}),l&&(()=>{const s=l.spots>0?Math.round(l.attendees/l.spots*100):0;return e.jsxs("button",{onClick:()=>{const t=k.find(n=>n.id===l.id)||l;x(),p(),w(t)},className:"w-full premium-card p-4 rounded-[20px] relative overflow-hidden text-left hover:bg-secondary/5 transition-colors",children:[e.jsx("div",{className:"absolute -right-4 -top-4 w-16 h-16 bg-accent/5 rounded-full blur-2xl"}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(de,{size:12,className:"text-accent"}),e.jsx("span",{className:"text-[9px] font-black text-accent uppercase tracking-widest",children:"Top Event"})]}),e.jsxs("span",{className:`text-[10px] font-black ${s>=80?"text-accent":"text-primary"}`,children:[s,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden bg-secondary/10 shrink-0",children:l.image&&e.jsx("img",{src:l.image,className:"w-full h-full object-cover",alt:"",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-secondary truncate",children:l.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsxs("span",{className:"text-[10px] text-secondary/40",children:[l.attendees,"/",l.spots," spots"]}),l.category&&e.jsx("span",{className:"text-[9px] font-bold text-primary/50 bg-primary/5 px-1.5 py-0.5 rounded-full",children:l.category})]}),e.jsx("div",{className:"w-full h-1 bg-secondary/10 rounded-full mt-1.5 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${s>=100?"bg-red-500":s>=80?"bg-accent":"bg-primary/50"}`,style:{width:`${Math.min(s,100)}%`}})})]}),e.jsx(N,{size:14,className:"text-secondary/30 shrink-0"})]})]})})(),$.length>0&&e.jsxs(i.div,{...m(3),children:[e.jsxs("h4",{className:"text-xs font-black text-primary uppercase tracking-widest mb-3",children:["Connect",e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:$.map(s=>{const t=be[s.key]?.(j[s.key]),n=L[s.key]||L.website;return e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full border text-[11px] font-bold transition-all group ${n.bg} ${n.border} ${n.color} ${n.hoverBg}`,children:[e.jsx(ge,{size:10}),e.jsx("span",{className:"capitalize text-[9px] font-black opacity-50 mr-0.5",children:s.key}),j[s.key],e.jsx(ye,{size:8,className:"opacity-0 group-hover:opacity-100 transition-opacity"})]},s.key)})})]}),a.organiserCategories?.length>0&&e.jsxs(i.div,{...m(4),children:[e.jsxs("h4",{className:"text-xs font-black text-primary uppercase tracking-widest mb-3",children:["Hosts",e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.organiserCategories.map(s=>{const t=xe.find(o=>o.id===s),n=t?.icon;return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-primary/10 rounded-full border border-primary/20 text-[11px] font-bold text-primary",children:[n&&e.jsx(n,{size:12}),t?.label||s]},s)})})]}),a.events?.length>0&&e.jsxs(i.div,{...m(5),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-xs font-black text-primary uppercase tracking-widest",children:["Events",e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("div",{className:"flex gap-1",children:[{key:"upcoming",label:"Upcoming",icon:me,count:S.length},{key:"past",label:"Past",icon:ue,count:E.length}].map(s=>e.jsxs("button",{onClick:()=>{x(),G(s.key)},className:`flex items-center gap-1 px-2 py-1 rounded-lg text-[10px] font-bold transition-all ${g===s.key?"bg-primary/10 text-primary":"text-secondary/40 hover:text-secondary/60"}`,children:[e.jsx(s.icon,{size:10}),s.label," (",s.count,")"]},s.key))})]}),e.jsx(P,{mode:"wait",children:e.jsx(i.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.12},className:"space-y-2",children:z.length>0?z.map(s=>{const t=s.spots>0?Math.round(s.attendees/s.spots*100):0;return e.jsxs("button",{onClick:()=>{const n=k.find(o=>o.id===s.id)||s;x(),p(),w(n)},className:"w-full flex items-center gap-3 p-3 rounded-2xl bg-secondary/5 border border-secondary/10 hover:bg-secondary/10 transition-colors text-left",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl overflow-hidden bg-secondary/10 shrink-0",children:s.image&&e.jsx("img",{src:s.image,className:"w-full h-full object-cover",alt:"",loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-secondary truncate",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[e.jsx("span",{className:"text-[10px] text-secondary/40 font-medium",children:s.date}),e.jsxs("span",{className:`text-[10px] font-bold ${t>=80?"text-accent":"text-primary"}`,children:[s.attendees,"/",s.spots," spots"]}),s.category&&e.jsx("span",{className:"text-[9px] font-bold text-primary/50 bg-primary/5 px-1.5 py-0.5 rounded-full",children:s.category}),parseFloat(s.price)>0&&e.jsxs("span",{className:"text-[9px] font-bold text-green-600",children:["$",s.price]})]}),e.jsx("div",{className:"w-full h-1 bg-secondary/10 rounded-full mt-1.5 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${t>=100?"bg-red-500":t>=80?"bg-accent":"bg-primary/50"}`,style:{width:`${Math.min(t,100)}%`}})})]}),e.jsx(N,{size:14,className:"text-secondary/30 shrink-0"})]},s.id)}):e.jsxs("p",{className:"text-center py-4 text-[11px] text-secondary/40 font-medium",children:["No ",g," events"]})},g)})]}),a.communities?.length>0&&e.jsxs(i.div,{...m(6),children:[e.jsxs("h4",{className:"text-xs font-black text-primary uppercase tracking-widest mb-3",children:["Communities",e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("div",{className:"space-y-2",children:a.communities.map(s=>{const t=R.find(n=>n.id===s.id)||s;return e.jsxs("button",{onClick:()=>{x(),p(),B(t)},className:"w-full flex items-center gap-3 p-3 rounded-2xl bg-secondary/5 border border-secondary/10 hover:bg-secondary/10 transition-colors text-left",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-secondary/10 shrink-0 flex items-center justify-center text-base",children:s.avatar||"üèòÔ∏è"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-secondary truncate",children:s.name}),s.description&&e.jsx("p",{className:"text-[10px] text-secondary/40 truncate",children:s.description}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[e.jsxs("span",{className:"text-[10px] text-secondary/40",children:[s.members??0," members"]}),s.category&&e.jsx("span",{className:"text-[9px] font-bold text-primary/50 bg-primary/5 px-1.5 py-0.5 rounded-full",children:s.category})]})]}),e.jsx(N,{size:14,className:"text-secondary/30 shrink-0"})]},s.id)})})]}),!a.events?.length&&!a.communities?.length&&e.jsxs("div",{className:"text-center py-6",children:[e.jsx(M,{size:32,className:"text-secondary/20 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-secondary/40 font-medium",children:"This organiser hasn't hosted anything yet"})]})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-sm text-secondary/40",children:"Profile not found"})})})]})})})}export{ke as default};
