import{a as u,j as t,m as j}from"./vendor-motion-CtvpaCTF.js";import{u as S,a as T,X as C,Z as E,C as F,M as H,U as L,S as z}from"./index-CNB0ocoX.js";import"./vendor-maps-DdmUqcD-.js";const W=[{label:"What's on this week?",icon:"ðŸ“…"},{label:"Find me a hike",icon:"ðŸ¥¾"},{label:"Suggest a dinner",icon:"ðŸ½ï¸"},{label:"My match score",icon:"âœ¨"},{label:"Recommend a group",icon:"ðŸ‘¥"}],O=({user:x={},events:c=[]})=>{const{setIsChatOpen:k,setPose:i}=S(),f=T(s=>s.loginStreak),[d,h]=u.useState(""),N=x?.name?.split(" ")[0]||"there",p=x?.interests||[],M=x?.location||"your area",l=c.filter(s=>s.is_micro_meet||s.isMicroMeet),[g,m]=u.useState([{id:1,type:"bot",text:`Hey ${N}! ðŸ˜¸ I'm Mango, your personal social curator.${p.length?` I know your interests â€” **${p.join(", ")}** â€” and I've been scouting events for you.`:""} What are you in the mood for?`}]),[b,y]=u.useState(!1),w=u.useRef(null),D=()=>{w.current?.scrollIntoView({behavior:"smooth"})};u.useEffect(()=>{D()},[g,b]);const v=s=>{const e=s.toLowerCase();let n=[];if(e.includes("hike")||e.includes("walk")||e.includes("outdoor")||e.includes("nature")){i("celebrate");const o=c.find(r=>r.category==="Outdoors"),a=l.find(r=>r.category==="Outdoors");n.push({id:Date.now()+1,type:"bot",text:`I love that you're adventurous! ðŸ¥¾ Based on your location in **${M}**, here's what I found:`}),o&&n.push({id:Date.now()+2,type:"bot",text:`This one has **${o.attendees} people** going and covers a 12km trail with moderate difficulty:`,card:o}),a&&n.push({id:Date.now()+3,type:"bot",text:"For something more intimate, this **Micro-Meet** has a **88% match** with your profile:",card:a,isMicro:!0}),n.push({id:Date.now()+4,type:"bot",text:"Pro tip: The hike is dog-friendly and elder-friendly! Want me to sign you up? ðŸ˜º"})}else if(e.includes("food")||e.includes("dinner")||e.includes("brunch")||e.includes("drink")||e.includes("eat")||e.includes("restaurant")){i("celebrate");const o=c.filter(r=>r.category==="Food & Drinks"),a=l.find(r=>r.category==="Food & Drinks");n.push({id:Date.now()+1,type:"bot",text:`Ooh, a foodie! ðŸ½ï¸ I found **${o.length} food events** and a curated dinner Micro-Meet for you.`}),o[0]&&n.push({id:Date.now()+2,type:"bot",text:`**${o[0].title}** is ${o[0].price===0?"FREE":"Â£"+o[0].price} and has great vibes:`,card:o[0]}),a&&n.push({id:Date.now()+3,type:"bot",text:`And this AI-curated dinner has a **${a.matchScore}% match** â€” you'll love the crowd:`,card:a,isMicro:!0}),o[1]&&n.push({id:Date.now()+4,type:"bot",text:`Also check out **${o[1].title}** at ${o[1].location?.split(",")[0]}:`,card:o[1]})}else if(e.includes("game")||e.includes("board")||e.includes("play")||e.includes("fun")){i("playing");const o=c.find(a=>a.category==="Games");n.push({id:Date.now()+1,type:"bot",text:"Game night enthusiast! ðŸŽ² I found the perfect match:"}),o&&n.push({id:Date.now()+2,type:"bot",text:`**${o.title}** â€” beginner friendly with games provided! Only Â£${o.price}:`,card:o}),n.push({id:Date.now()+3,type:"bot",text:"The Board Game Night community also has **445 members**. Want me to show you their upcoming events? ðŸŽ¯"})}else if(e.includes("music")||e.includes("jazz")||e.includes("party")||e.includes("night")||e.includes("dance")||e.includes("club")){i("celebrate");const o=c.filter(a=>a.category==="Nightlife"||a.category==="Entertainment");n.push({id:Date.now()+1,type:"bot",text:"Let's get the party started! ðŸŽµ Here's what's happening:"}),o.forEach((a,r)=>{n.push({id:Date.now()+2+r,type:"bot",text:r===0?"This one's gonna be epic:":"And if you prefer something more chill:",card:a})}),n.push({id:Date.now()+10,type:"bot",text:"I noticed you're into **Music** â€” shall I keep an eye out for DJ sets and live performances? ðŸŽ§"})}else if(e.includes("coffee")||e.includes("chat")||e.includes("meet")||e.includes("people")||e.includes("friends")){i("curious");const o=l[0];n.push({id:Date.now()+1,type:"bot",text:"Love that you want to connect! â˜• Micro-Meets are perfect for meaningful conversations."}),o&&n.push({id:Date.now()+2,type:"bot",text:`This **Startup Founders** coffee chat has a **${o.matchScore}% alignment** with your interests:`,card:o,isMicro:!0}),n.push({id:Date.now()+3,type:"bot",text:"I can also suggest communities where people share your interests. Want recommendations? ðŸ¤"})}else if(e.includes("week")||e.includes("weekend")||e.includes("what's on")||e.includes("upcoming")||e.includes("soon")){i("wave"),n.push({id:Date.now()+1,type:"bot",text:`Great question! Here's your week at a glance: ðŸ“…

**You have ${c.length} events** available${l.length?` including **${l.length} Micro-Meets**`:""}.`});const o=c[0];o&&n.push({id:Date.now()+2,type:"bot",text:`Coming up soonest â€” **${o.title}** on ${o.date}:`,card:o}),n.push({id:Date.now()+3,type:"bot",text:"Want me to show you what matches your interests? ðŸ˜¸"})}else e.includes("match")||e.includes("score")||e.includes("compatib")||e.includes("synergy")?(i("celebrate"),n.push({id:Date.now()+1,type:"bot",text:`Your match analysis is looking great! âœ¨

**Smart Match Score: 94%**
${p.length?`Based on your interests in **${p.join(", ")}**, I've identified high-synergy events.`:"I've identified high-synergy events for you."}

Your strongest matches:
â€¢ Dinner for 6 â€” **94%** (FinTech + Travel)
â€¢ Coffee Chat â€” **91%** (Startup Founders)
â€¢ Hike for 4 â€” **88%** (Nature Lovers)

Your profile resonates most with **Tech** and **Food** communities. Keep going to events to improve your score! ðŸ“ˆ`})):e.includes("group")||e.includes("community")||e.includes("tribe")||e.includes("join")?(i("curious"),n.push({id:Date.now()+1,type:"bot",text:`Based on your profile, here are my top community picks: ðŸ‘¥

ðŸš€ **London Tech Socials** â€” 1,240 members, â­ 4.8 rating
ðŸ¥¾ **Hiking Enthusiasts** â€” 890 members, â­ 4.6 rating
ðŸŽ² **Board Game Night** â€” 445 members, â­ 4.9 rating

You're already in all three! Want me to suggest new communities to explore? I noticed **Foodies United** (2,100 members) matches your food interest perfectly. ðŸœ`})):e.includes("xp")||e.includes("level")||e.includes("progress")||e.includes("achievement")||e.includes("rank")?(i("celebrate"),n.push({id:Date.now()+1,type:"bot",text:`Here's your progress report! ðŸŽ®

â­ **Level 4 â€” Socialite**
ðŸ’Ž **750 XP** (250 until Level 5: Trailblazer)
ðŸ”¥ **${f>0?`${f}-day streak!`:"No streak yet â€” log in tomorrow to start one!"}**

**Unlocked titles:** 5/10
â€¢ ðŸ‘£ First Steps
â€¢ ðŸ¦‹ Social Butterfly
â€¢ ðŸ›¡ï¸ Tribe Leader
â€¢ ðŸ’¬ Conversation Starter
â€¢ ðŸ¦‰ Night Owl

**Next unlock:** ðŸ—ºï¸ Explorer â€” attend events in 3 categories. You've done 2 so far! Almost there! ðŸ’ª`})):e.includes("help")||e.includes("what can")||e.includes("how")||e.includes("features")?(i("wave"),n.push({id:Date.now()+1,type:"bot",text:`I'm Mango, your social curator! Here's what I can help with: ðŸ˜¸

ðŸ” **Find events** â€” "What's on this week?"
ðŸ¥¾ **Activity search** â€” "Find me a hike"
ðŸ½ï¸ **Food & drinks** â€” "Suggest a dinner"
âœ¨ **Match scores** â€” "My match score"
ðŸ‘¥ **Communities** â€” "Recommend a group"
ðŸŽ® **Your progress** â€” "Show my XP"
ðŸŽµ **Nightlife** â€” "What parties are on?"
â˜• **Meet people** â€” "I want to meet new friends"

Just ask naturally â€” I understand context! ðŸ±`})):e.includes("hello")||e.includes("hi")||e.includes("hey")||e.includes("sup")||e==="yo"?(i("wave"),n.push({id:Date.now()+1,type:"bot",text:`Hey there! ðŸ‘‹ Great to see you! How's your week going?

${c.length?`I noticed you have **${c.length} events** to explore${l.length?` and **${l.length} AI-curated Micro-Meets**`:""} waiting.`:""} What sounds good â€” something active, social, or creative? ðŸ˜¸`})):e.includes("thank")||e.includes("thanks")||e.includes("cheers")||e.includes("awesome")||e.includes("great")?(i("celebrate"),n.push({id:Date.now()+1,type:"bot",text:"You're welcome! ðŸ˜¸ That's what I'm here for. Happy socialising! Let me know anytime you want event recommendations or need help. *purrs contentedly* ðŸ±"})):(i("curious"),n.push({id:Date.now()+1,type:"bot",text:`Hmm, I'm not sure about that one! ðŸ¤” But here are some things I'm great at:

â€¢ Finding **events** by category (hikes, drinks, games, music)
â€¢ Showing your **match scores** and recommendations
â€¢ Suggesting **communities** to join
â€¢ Checking your **XP progress** and achievements
â€¢ Telling you **what's on** this week

Try asking: *"What's happening this weekend?"* or *"Find me a dinner"* ðŸ˜¸`}));return n},I=s=>{if(s?.preventDefault(),!d.trim())return;const e={id:Date.now(),type:"user",text:d};m(a=>[...a,e]);const n=d;h(""),y(!0);const o=800+Math.random()*1200;setTimeout(()=>{const a=v(n);m(r=>[...r,...a]),y(!1)},o)},$=s=>{h(s),setTimeout(()=>{const e={id:Date.now(),type:"user",text:s};m(n=>[...n,e]),y(!0),setTimeout(()=>{const n=v(s);m(o=>[...o,...n]),y(!1)},1e3)},100),h("")};return t.jsxs(j.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed bottom-0 left-0 right-0 h-[85vh] bg-paper backdrop-blur-xl rounded-t-[32px] shadow-2xl z-[60] flex flex-col overflow-hidden border-t border-secondary/10",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-secondary/10 bg-paper shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-11 h-11 bg-gradient-to-br from-primary to-accent rounded-2xl flex items-center justify-center text-xl shadow-lg border-2 border-white/20",children:"ðŸ±"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-black text-secondary text-lg tracking-tight",children:"Mango AI"}),t.jsxs("p",{className:"text-[10px] text-secondary/50 font-bold flex items-center gap-1.5 uppercase tracking-widest",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Online",t.jsx("span",{className:"text-accent",children:"â€¢"}),"Personal Curator"]})]})]}),t.jsx("button",{onClick:()=>{k(!1),i("wave")},className:"w-10 h-10 rounded-full bg-secondary/10 flex items-center justify-center text-secondary hover:bg-secondary/20 transition-colors focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:outline-none","aria-label":"Close chat",children:t.jsx(C,{size:20})})]}),g.length<=2&&t.jsx("div",{className:"px-4 py-3 border-b border-secondary/5 flex gap-2 overflow-x-auto no-scrollbar shrink-0",children:W.map((s,e)=>t.jsxs("button",{onClick:()=>$(s.label),className:"flex items-center gap-1.5 px-3 py-2 rounded-full bg-secondary/5 border border-secondary/10 text-xs font-bold text-secondary/70 whitespace-nowrap hover:bg-primary/10 hover:text-primary hover:border-primary/20 transition-all shrink-0 focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:outline-none",children:[t.jsx("span",{children:s.icon}),s.label]},e))}),t.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar overscroll-contain p-4 space-y-4 bg-secondary/[0.02]",children:[t.jsx("div",{className:"text-center text-[10px] font-bold uppercase tracking-wider text-secondary/30 my-3",children:"Today"}),g.map(s=>t.jsxs("div",{className:`flex flex-col ${s.type==="user"?"items-end":"items-start"}`,children:[s.text&&t.jsx("div",{className:`max-w-[85%] p-4 rounded-2xl shadow-sm relative ${s.type==="user"?"bg-primary text-white rounded-br-sm":"bg-paper border border-secondary/10 text-secondary rounded-bl-sm"}`,children:t.jsx("p",{className:"leading-relaxed text-sm font-medium whitespace-pre-line",dangerouslySetInnerHTML:{__html:s.text.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<em>$1</em>")}})}),s.card&&t.jsxs(j.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},className:"mt-3 w-full max-w-sm premium-card overflow-hidden",children:[t.jsxs("div",{className:"h-32 relative",children:[t.jsx("img",{src:s.card.image,alt:s.card.title||"Event",className:"w-full h-full object-cover",loading:"lazy",onError:e=>{e.target.style.display="none"}}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-secondary/60 to-transparent"}),t.jsxs("div",{className:"absolute top-3 right-3 flex gap-1.5",children:[t.jsx("span",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase tracking-widest text-white ${s.isMicro?"bg-accent/90":"bg-white/20 backdrop-blur-md"}`,children:s.isMicro?"Micro-Meet":s.card.category}),s.card.matchScore&&t.jsxs("span",{className:"px-2 py-1 rounded-full bg-primary/90 text-[9px] font-black text-white flex items-center gap-1",children:[t.jsx(E,{size:10})," ",s.card.matchScore,"%"]})]}),t.jsx("div",{className:"absolute bottom-3 left-3",children:t.jsx("h4",{className:"font-black text-white text-lg drop-shadow-lg tracking-tight",children:s.card.title})})]}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-4 text-xs text-secondary/60 font-bold",children:[t.jsxs("span",{className:"flex items-center gap-1.5",children:[t.jsx(F,{size:12,className:"text-primary"})," ",s.card.date," â€¢ ",s.card.time]}),t.jsxs("span",{className:"flex items-center gap-1.5",children:[t.jsx(H,{size:12,className:"text-primary"})," ",s.card.location?.split(",")[0]]})]}),t.jsxs("div",{className:"flex items-center justify-between mt-3",children:[t.jsxs("span",{className:"text-xs text-secondary/50 font-bold flex items-center gap-1.5",children:[t.jsx(L,{size:12}),s.isMicro?`${s.card.spotsLeft} spots left`:`${s.card.attendees} going`]}),t.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded-xl text-xs font-black uppercase tracking-widest active:scale-95 transition-transform focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:outline-none",children:"View"})]})]})]})]},s.id)),b&&t.jsxs("div",{className:"flex items-center gap-3 ml-2",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center text-sm shadow-sm",children:"ðŸ±"}),t.jsxs("div",{className:"bg-paper border border-secondary/10 rounded-2xl rounded-bl-sm px-4 py-3 flex items-center gap-1.5",children:[t.jsx("div",{className:"w-2 h-2 bg-secondary/30 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),t.jsx("div",{className:"w-2 h-2 bg-secondary/30 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),t.jsx("div",{className:"w-2 h-2 bg-secondary/30 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}),t.jsx("div",{ref:w})]}),t.jsx("form",{onSubmit:I,className:"p-4 bg-paper border-t border-secondary/10 pb-[max(16px,env(safe-area-inset-bottom))] shrink-0",children:t.jsxs("div",{className:"relative flex items-center gap-2",children:[t.jsx("input",{type:"text",value:d,onChange:s=>h(s.target.value),placeholder:"Ask Mango anything...","aria-label":"Ask Mango anything",enterKeyHint:"send",className:"flex-1 bg-secondary/5 border border-secondary/10 text-[var(--text)] rounded-2xl pl-5 pr-14 py-3.5 focus:outline-none focus:ring-2 focus:ring-primary/30 transition-all font-medium text-sm placeholder:text-secondary/40"}),t.jsx("button",{type:"submit",disabled:!d.trim(),className:"absolute right-2 w-10 h-10 bg-primary text-white rounded-xl disabled:opacity-30 disabled:bg-secondary/20 disabled:cursor-not-allowed transition-all hover:scale-105 active:scale-95 shadow-md flex items-center justify-center focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:outline-none","aria-label":"Send message",children:t.jsx(z,{size:18})})]})})]})};export{O as default};
