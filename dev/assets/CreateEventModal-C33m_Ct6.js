import{j as e,a as d,A as w,m as b}from"./vendor-motion-fydZXqiE.js";import{f as z,M as k,g,h as S,i as E,j as L,b as T,X as N,I as F,c as P}from"./index-BKj0yDEq.js";import{u as I,a as M,G as A,M as D,g as R,b as $}from"./vendor-maps-nwIz2Bw_.js";const G=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],O=z("loader-circle",G),q=["places"],K={width:"100%",height:"100%",borderRadius:"16px"},x={lat:51.5074,lng:-.1278},U={disableDefaultUI:!0,clickableIcons:!1,zoomControl:!0,styles:[{featureType:"all",elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]},V=({value:r,onChange:n})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(k,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-secondary/40","aria-hidden":"true"}),e.jsx("input",{type:"text",placeholder:"Type a location...",value:typeof r=="string"?r:r?.address||"",onChange:t=>n(t.target.value),className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl pl-12 pr-4 py-3 text-sm font-bold focus:outline-none focus:border-primary transition-all placeholder:text-secondary/30 text-[var(--text)]"})]}),e.jsxs("p",{className:"text-[10px] text-secondary/40 ml-3 flex items-center gap-1",children:[e.jsx(g,{size:10}),"Map preview unavailable — enter address manually"]})]}),_=({value:r,onChange:n,apiKey:t})=>{const{isLoaded:l,loadError:s}=I({id:"google-map-script",googleMapsApiKey:t||"",libraries:q});return!t||s?e.jsx(V,{value:r,onChange:n}):l?e.jsx(J,{value:r,onChange:n}):e.jsx("div",{className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl p-8 flex items-center justify-center",children:e.jsx(O,{size:24,className:"text-primary animate-spin"})})},J=({value:r,onChange:n})=>{const t=typeof r=="object"&&r?.address!=null?r:{address:typeof r=="string"?r:"",lat:x.lat,lng:x.lng},[l,s]=d.useState(t),{ready:h,value:y,suggestions:{status:m,data:p},setValue:c,clearSuggestions:f}=M({requestOptions:{},debounce:300,defaultValue:typeof r=="string"?r:r?.address||""});d.useEffect(()=>{const o=typeof r=="string"?r:r?.address??"",i=typeof r=="object"&&r?.address!=null?r:{address:o,lat:x.lat,lng:x.lng};s(i),c(o,!1)},[r,c]);const j=async o=>{c(o,!1),f();try{const i=await R({address:o}),{lat:a,lng:C}=await $(i[0]),v={address:o,lat:a,lng:C};s(v),n(v)}catch(i){console.error("Error: ",i)}},u=d.useMemo(()=>({lat:l.lat||x.lat,lng:l.lng||x.lng}),[l]);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx(S,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-secondary/40"}),e.jsx("input",{value:y,onChange:o=>c(o.target.value),disabled:!h,placeholder:"Search location...",className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl pl-12 pr-4 py-3 text-sm font-bold focus:outline-none focus:border-primary transition-all placeholder:text-secondary/30 text-[var(--text)]"}),e.jsx(w,{children:m==="OK"&&e.jsx(b.ul,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-paper border border-secondary/10 rounded-2xl shadow-xl overflow-hidden max-h-60 overflow-y-auto z-20",children:p.map(({place_id:o,description:i})=>e.jsxs("li",{onClick:()=>j(i),className:"px-4 py-3 hover:bg-secondary/5 cursor-pointer text-sm font-medium text-secondary truncate flex items-center gap-2",children:[e.jsx(k,{size:14,className:"text-secondary/40 flex-shrink-0"}),i]},o))})})]}),e.jsx("div",{className:"h-48 w-full rounded-2xl overflow-hidden border border-secondary/10 relative",children:e.jsx(A,{mapContainerStyle:K,zoom:14,center:u,options:U,onClick:()=>{},children:e.jsx(D,{position:u})})})]})},H=({onClose:r,onSubmit:n})=>{const[t,l]=d.useState({title:"",date:"2026-02-15",time:"19:00",location:"",type:"free",price:0,category:"Food & Drinks",image:""}),[s,h]=d.useState({}),[y,m]=d.useState(null),[p,c]=d.useState(!1);E(!0,r);const f=L(!0),j=()=>{const a={};return t.title.trim()||(a.title="Title is required"),t.location.trim()||(a.location="Location is required"),t.type==="ticketed"&&t.price<=0&&(a.price="Price must be greater than 0"),h(a),Object.keys(a).length===0},u=async()=>{if(!p&&j()){c(!0);try{await n({...t,image:t.image||"https://images.unsplash.com/photo-1529543544277-750e0c7e4d18?w=800&q=80"})}finally{c(!1)}}},o=a=>{l({...t,image:a}),m(a||null)},i=T.filter(a=>a.id!=="All");return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-label":"Create event",ref:f,children:[e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-secondary/60 backdrop-blur-sm"}),e.jsxs(b.div,{initial:{y:50,opacity:0,scale:.9},animate:{y:0,opacity:1,scale:1},exit:{y:50,opacity:0,scale:.9},className:"bg-paper w-full max-w-md rounded-[32px] overflow-x-hidden overflow-y-auto border border-secondary/10 shadow-2xl relative z-50 max-h-[90vh]",children:[e.jsxs("div",{className:"sticky top-0 bg-paper p-6 pb-4 border-b border-secondary/10 z-20",children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 z-30 w-10 h-10 flex items-center justify-center rounded-xl bg-paper text-secondary/50 hover:text-secondary hover:bg-secondary/10 transition-colors active:scale-90","aria-label":"Close",children:e.jsx(N,{size:20,strokeWidth:2.5})}),e.jsxs("h2",{className:"text-2xl font-black tracking-tight text-secondary",children:["Create Event",e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("p",{className:"text-xs text-secondary/50 font-medium mt-1",children:"Share your vibe with the community"})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"event-image",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Cover Image"}),y?e.jsxs("div",{className:"relative rounded-2xl overflow-hidden",children:[e.jsx("img",{src:y,alt:"Preview",className:"w-full h-40 object-cover",loading:"lazy",onError:()=>m(null)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-secondary/50 to-transparent","aria-hidden":"true"}),e.jsx("button",{onClick:()=>o(""),className:"absolute top-2 right-2 w-8 h-8 rounded-full bg-secondary/70 flex items-center justify-center text-white hover:bg-secondary/90","aria-label":"Remove image",children:e.jsx(N,{size:16})})]}):e.jsxs("div",{className:"relative",children:[e.jsx(F,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-secondary/40","aria-hidden":"true"}),e.jsx("input",{id:"event-image",type:"url",placeholder:"Paste image URL...",value:t.image,onChange:a=>o(a.target.value),className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl pl-12 pr-4 py-4 text-sm font-medium focus:outline-none focus:border-primary transition-all placeholder:text-secondary/30"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"event-title",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Event Title"}),e.jsx("input",{id:"event-title",type:"text",placeholder:"e.g. Friday Drinks at The Golden Lion",value:t.title,onChange:a=>l({...t,title:a.target.value}),className:`w-full bg-secondary/5 border rounded-2xl px-4 py-4 text-sm font-bold focus:outline-none focus:border-primary transition-all placeholder:text-secondary/30 ${s.title?"border-red-500":"border-secondary/10"}`,"aria-invalid":!!s.title,"aria-describedby":s.title?"title-error":void 0}),s.title&&e.jsxs("p",{id:"title-error",className:"text-xs text-red-500 flex items-center gap-1 ml-3",role:"alert",children:[e.jsx(g,{size:12})," ",s.title]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",id:"category-label",children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",role:"radiogroup","aria-labelledby":"category-label",children:i.slice(0,6).map(a=>e.jsxs("button",{role:"radio","aria-checked":t.category===a.id,onClick:()=>l({...t,category:a.id}),className:`px-3 py-2 rounded-xl text-xs font-bold flex items-center gap-1.5 transition-all ${t.category===a.id?"bg-primary text-white":"bg-secondary/5 text-secondary/70 border border-secondary/10 hover:border-secondary/30"}`,children:[e.jsx(a.icon,{size:14}),a.label]},a.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"event-date",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Date"}),e.jsx("input",{id:"event-date",type:"date",value:t.date,onChange:a=>l({...t,date:a.target.value}),className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl px-4 py-4 text-sm font-bold focus:outline-none focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"event-time",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Time"}),e.jsx("input",{id:"event-time",type:"time",value:t.time,onChange:a=>l({...t,time:a.target.value}),className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl px-4 py-4 text-sm font-bold focus:outline-none focus:border-primary"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Location"}),e.jsx(_,{apiKey:"your key (placeholder)",value:t.location,onChange:a=>{l(typeof a=="string"?{...t,location:a}:{...t,location:a.address,coordinates:{lat:a.lat,lng:a.lng}})}}),s.location&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1 ml-3",role:"alert",children:[e.jsx(g,{size:12})," ",s.location]})]}),e.jsxs("div",{className:"flex bg-secondary/5 p-1.5 rounded-2xl border border-secondary/10",role:"radiogroup","aria-label":"Event pricing",children:[e.jsx("button",{role:"radio","aria-checked":t.type==="free",onClick:()=>l({...t,type:"free",price:0}),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${t.type==="free"?"bg-primary text-white shadow-lg":"text-secondary/50"}`,children:"Free"}),e.jsx("button",{role:"radio","aria-checked":t.type==="ticketed",onClick:()=>l({...t,type:"ticketed",price:10}),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${t.type==="ticketed"?"bg-primary text-white shadow-lg":"text-secondary/50"}`,children:"Ticketed"})]}),e.jsx(w,{children:t.type==="ticketed"&&e.jsxs(b.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[e.jsx("label",{htmlFor:"event-price",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Ticket Price (£)"}),e.jsx("input",{id:"event-price",type:"number",min:"1",value:t.price,onChange:a=>l({...t,price:Number(a.target.value)}),className:`w-full bg-secondary/5 border rounded-2xl px-4 py-4 text-lg font-black focus:outline-none focus:border-primary ${s.price?"border-red-500":"border-secondary/10"}`,"aria-invalid":!!s.price,"aria-describedby":s.price?"price-error":void 0}),s.price&&e.jsxs("p",{id:"price-error",className:"text-xs text-red-500 flex items-center gap-1 ml-3",role:"alert",children:[e.jsx(g,{size:12})," ",s.price]}),e.jsx("p",{className:"text-[10px] text-secondary/40 ml-3",children:"5% platform fee applies to ticketed events"})]})})]}),e.jsx("div",{className:"sticky bottom-0 bg-paper p-6 pt-4 border-t border-secondary/10",children:e.jsx("button",{onClick:u,disabled:p,className:`w-full py-4 bg-gradient-to-r from-primary to-accent rounded-2xl font-black uppercase tracking-widest shadow-lg text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform ${p?"opacity-60 cursor-not-allowed":""}`,children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Publishing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{size:18}),"Publish Event"]})})})]})]})};export{H as default};
