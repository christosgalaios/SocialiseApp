import{j as e,a as d,A as k,m as b}from"./vendor-motion-CtvpaCTF.js";import{f as z,M as C,g,h as S,i as T,j as E,k as L,b as P,X as w,I as F,c as A}from"./index-BPnt8bX8.js";import{u as I,a as M,G as D,M as R,g as $,b as G}from"./vendor-maps-Dh4qTN3G.js";const O=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],q=z("loader-circle",O),K=["places"],U={width:"100%",height:"100%",borderRadius:"16px"},x={lat:51.5074,lng:-.1278},V={disableDefaultUI:!0,clickableIcons:!1,zoomControl:!0,styles:[{featureType:"all",elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]},_=({value:r,onChange:n})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(C,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-secondary/40","aria-hidden":"true"}),e.jsx("input",{type:"text",placeholder:"Type a location...",value:typeof r=="string"?r:r?.address||"",onChange:a=>n(a.target.value),className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl pl-12 pr-4 py-3 text-sm font-bold focus:outline-none focus:border-primary transition-all placeholder:text-secondary/30 text-[var(--text)]"})]}),e.jsxs("p",{className:"text-[10px] text-secondary/40 ml-3 flex items-center gap-1",children:[e.jsx(g,{size:10}),"Map preview unavailable — enter address manually"]})]}),J=({value:r,onChange:n,apiKey:a})=>{const{isLoaded:l,loadError:s}=I({id:"google-map-script",googleMapsApiKey:a||"",libraries:K});return!a||s?e.jsx(_,{value:r,onChange:n}):l?e.jsx(W,{value:r,onChange:n}):e.jsx("div",{className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl p-8 flex items-center justify-center",children:e.jsx(q,{size:24,className:"text-primary animate-spin"})})},W=({value:r,onChange:n})=>{const a=typeof r=="object"&&r?.address!=null?r:{address:typeof r=="string"?r:"",lat:x.lat,lng:x.lng},[l,s]=d.useState(a),{ready:f,value:y,suggestions:{status:m,data:p},setValue:c,clearSuggestions:j}=M({requestOptions:{},debounce:300,defaultValue:typeof r=="string"?r:r?.address||""});d.useEffect(()=>{const o=typeof r=="string"?r:r?.address??"",i=typeof r=="object"&&r?.address!=null?r:{address:o,lat:x.lat,lng:x.lng};s(i),c(o,!1)},[r,c]);const v=async o=>{c(o,!1),j();try{const i=await $({address:o}),{lat:h,lng:N}=await G(i[0]),t={address:o,lat:h,lng:N};s(t),n(t)}catch(i){console.error("Error: ",i)}},u=d.useMemo(()=>({lat:l.lat||x.lat,lng:l.lng||x.lng}),[l]);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx(S,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-secondary/40"}),e.jsx("input",{value:y,onChange:o=>c(o.target.value),disabled:!f,placeholder:"Search location...",className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl pl-12 pr-4 py-3 text-sm font-bold focus:outline-none focus:border-primary transition-all placeholder:text-secondary/30 text-[var(--text)]"}),e.jsx(k,{children:m==="OK"&&e.jsx(b.ul,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-paper border border-secondary/10 rounded-2xl shadow-xl overflow-hidden max-h-60 overflow-y-auto z-20",children:p.map(({place_id:o,description:i})=>e.jsxs("li",{onClick:()=>v(i),className:"px-4 py-3 hover:bg-secondary/5 cursor-pointer text-sm font-medium text-secondary truncate flex items-center gap-2",children:[e.jsx(C,{size:14,className:"text-secondary/40 flex-shrink-0"}),i]},o))})})]}),e.jsx("div",{className:"h-48 w-full rounded-2xl overflow-hidden border border-secondary/10 relative",children:e.jsx(D,{mapContainerStyle:U,zoom:14,center:u,options:V,onClick:()=>{},children:e.jsx(R,{position:u})})})]})},H=({onClose:r,onSubmit:n})=>{const[a,l]=d.useState({title:"",date:"2026-02-15",time:"19:00",location:"",type:"free",price:0,category:"Food & Drinks",image:""}),[s,f]=d.useState({}),[y,m]=d.useState(null),[p,c]=d.useState(!1);T(!0,r);const j=E(!0),{sheetY:v,handleProps:u}=L(r),o=()=>{const t={};return a.title.trim()||(t.title="Title is required"),a.location.trim()||(t.location="Location is required"),a.type==="ticketed"&&a.price<=0&&(t.price="Price must be greater than 0"),f(t),Object.keys(t).length===0},i=async()=>{if(!p&&o()){c(!0);try{await n({...a,image:a.image||"https://images.unsplash.com/photo-1529543544277-750e0c7e4d18?w=800&q=80"})}finally{c(!1)}}},h=t=>{l({...a,image:t}),m(t||null)},N=P.filter(t=>t.id!=="All");return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-label":"Create event",ref:j,children:[e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onPointerDown:r,className:"absolute inset-0 bg-secondary/60 backdrop-blur-sm",role:"presentation"}),e.jsxs(b.div,{initial:{y:50,opacity:0,scale:.9},animate:{y:0,opacity:1,scale:1},exit:{y:50,opacity:0,scale:.9},style:{y:v},className:"bg-paper w-full max-w-md rounded-[32px] overflow-hidden border border-secondary/10 shadow-2xl relative z-50 max-h-[90vh] flex flex-col",children:[e.jsx("div",{...u,className:"flex justify-center pt-3 pb-0 shrink-0",children:e.jsx("div",{className:"w-10 h-1 rounded-full bg-secondary/20"})}),e.jsxs("div",{className:"bg-paper px-6 pt-3 pb-4 border-b border-secondary/10 relative shrink-0",style:{touchAction:"manipulation"},children:[e.jsx("button",{onPointerDown:t=>{t.stopPropagation(),r()},className:"absolute top-4 right-4 z-30 w-10 h-10 flex items-center justify-center rounded-xl bg-paper text-secondary/50 hover:text-secondary hover:bg-secondary/10 transition-colors active:scale-90","aria-label":"Close",style:{touchAction:"manipulation"},children:e.jsx(w,{size:20,strokeWidth:2.5})}),e.jsxs("h2",{className:"text-2xl font-black tracking-tight text-secondary",children:["Create Event",e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("p",{className:"text-xs text-secondary/50 font-medium mt-1",children:"Share your vibe with the community"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-y-contain no-scrollbar",children:e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"event-image",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Cover Image"}),y?e.jsxs("div",{className:"relative rounded-2xl overflow-hidden",children:[e.jsx("img",{src:y,alt:"Preview",className:"w-full h-40 object-cover",loading:"lazy",onError:()=>m(null)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-secondary/50 to-transparent","aria-hidden":"true"}),e.jsx("button",{onClick:()=>h(""),className:"absolute top-2 right-2 w-8 h-8 rounded-full bg-secondary/70 flex items-center justify-center text-white hover:bg-secondary/90","aria-label":"Remove image",children:e.jsx(w,{size:16})})]}):e.jsxs("div",{className:"relative",children:[e.jsx(F,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-secondary/40","aria-hidden":"true"}),e.jsx("input",{id:"event-image",type:"url",placeholder:"Paste image URL...",value:a.image,onChange:t=>h(t.target.value),className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl pl-12 pr-4 py-4 text-sm font-medium focus:outline-none focus:border-primary transition-all placeholder:text-secondary/30"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"event-title",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Event Title"}),e.jsx("input",{id:"event-title",type:"text",placeholder:"e.g. Friday Drinks at The Golden Lion",value:a.title,onChange:t=>l({...a,title:t.target.value}),className:`w-full bg-secondary/5 border rounded-2xl px-4 py-4 text-sm font-bold focus:outline-none focus:border-primary transition-all placeholder:text-secondary/30 ${s.title?"border-red-500":"border-secondary/10"}`,"aria-invalid":!!s.title,"aria-describedby":s.title?"title-error":void 0}),s.title&&e.jsxs("p",{id:"title-error",className:"text-xs text-red-500 flex items-center gap-1 ml-3",role:"alert",children:[e.jsx(g,{size:12})," ",s.title]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",id:"category-label",children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",role:"radiogroup","aria-labelledby":"category-label",children:N.slice(0,6).map(t=>e.jsxs("button",{role:"radio","aria-checked":a.category===t.id,onClick:()=>l({...a,category:t.id}),className:`px-3 py-2 rounded-xl text-xs font-bold flex items-center gap-1.5 transition-all ${a.category===t.id?"bg-primary text-white":"bg-secondary/5 text-secondary/70 border border-secondary/10 hover:border-secondary/30"}`,children:[e.jsx(t.icon,{size:14}),t.label]},t.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"event-date",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Date"}),e.jsx("input",{id:"event-date",type:"date",value:a.date,onChange:t=>l({...a,date:t.target.value}),className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl px-4 py-4 text-sm font-bold focus:outline-none focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"event-time",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Time"}),e.jsx("input",{id:"event-time",type:"time",value:a.time,onChange:t=>l({...a,time:t.target.value}),className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl px-4 py-4 text-sm font-bold focus:outline-none focus:border-primary"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Location"}),e.jsx(J,{apiKey:"your key (placeholder)",value:a.location,onChange:t=>{l(typeof t=="string"?{...a,location:t}:{...a,location:t.address,coordinates:{lat:t.lat,lng:t.lng}})}}),s.location&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1 ml-3",role:"alert",children:[e.jsx(g,{size:12})," ",s.location]})]}),e.jsxs("div",{className:"flex bg-secondary/5 p-1.5 rounded-2xl border border-secondary/10",role:"radiogroup","aria-label":"Event pricing",children:[e.jsx("button",{role:"radio","aria-checked":a.type==="free",onClick:()=>l({...a,type:"free",price:0}),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${a.type==="free"?"bg-primary text-white shadow-lg":"text-secondary/50"}`,children:"Free"}),e.jsx("button",{role:"radio","aria-checked":a.type==="ticketed",onClick:()=>l({...a,type:"ticketed",price:10}),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${a.type==="ticketed"?"bg-primary text-white shadow-lg":"text-secondary/50"}`,children:"Ticketed"})]}),e.jsx(k,{children:a.type==="ticketed"&&e.jsxs(b.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[e.jsx("label",{htmlFor:"event-price",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Ticket Price (£)"}),e.jsx("input",{id:"event-price",type:"number",min:"1",value:a.price,onChange:t=>l({...a,price:Number(t.target.value)}),className:`w-full bg-secondary/5 border rounded-2xl px-4 py-4 text-lg font-black focus:outline-none focus:border-primary ${s.price?"border-red-500":"border-secondary/10"}`,"aria-invalid":!!s.price,"aria-describedby":s.price?"price-error":void 0}),s.price&&e.jsxs("p",{id:"price-error",className:"text-xs text-red-500 flex items-center gap-1 ml-3",role:"alert",children:[e.jsx(g,{size:12})," ",s.price]}),e.jsx("p",{className:"text-[10px] text-secondary/40 ml-3",children:"5% platform fee applies to ticketed events"})]})})]})}),e.jsx("div",{className:"bg-paper p-6 pt-4 border-t border-secondary/10 shrink-0",children:e.jsx("button",{onClick:i,disabled:p,className:`w-full py-4 bg-gradient-to-r from-primary to-accent rounded-2xl font-black uppercase tracking-widest shadow-lg text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform ${p?"opacity-60 cursor-not-allowed":""}`,children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Publishing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{size:18}),"Publish Event"]})})})]})]})};export{H as default};
