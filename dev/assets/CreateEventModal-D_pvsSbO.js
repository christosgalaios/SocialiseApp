import{j as e,a as c,A as w,m as g}from"./vendor-motion-fydZXqiE.js";import{f as C,g as y,h as z,M as E,i as S,j as L,b as T,X as N,I as P,c as F}from"./index-BAt1Pnwx.js";import{u as I,a as M,G as A,M as D,g as R,b as $}from"./vendor-maps-nwIz2Bw_.js";const G=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],O=C("loader-circle",G),q=["places"],K={width:"100%",height:"100%",borderRadius:"16px"},p={lat:51.5074,lng:-.1278},U={disableDefaultUI:!0,clickableIcons:!1,zoomControl:!0,styles:[{featureType:"all",elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]},V=({value:r,onChange:x,apiKey:a})=>{const{isLoaded:l,loadError:s}=I({id:"google-map-script",googleMapsApiKey:a||"",libraries:q});return a?s?e.jsxs("div",{className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl p-4 flex items-center justify-center gap-2 text-red-500 text-sm",children:[e.jsx(y,{size:16}),e.jsx("span",{children:"Error loading maps"})]}):l?e.jsx(_,{value:r,onChange:x}):e.jsx("div",{className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl p-8 flex items-center justify-center",children:e.jsx(O,{size:24,className:"text-primary animate-spin"})}):e.jsxs("div",{className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl p-4 flex items-center justify-center gap-2 text-secondary/50 text-sm",children:[e.jsx(y,{size:16}),e.jsx("span",{children:"Map API Key missing"})]})},_=({value:r,onChange:x})=>{const a=typeof r=="object"&&r?.address!=null?r:{address:typeof r=="string"?r:"",lat:p.lat,lng:p.lng},[l,s]=c.useState(a),{ready:h,value:u,suggestions:{status:m,data:d},setValue:n,clearSuggestions:f}=M({requestOptions:{},debounce:300,defaultValue:typeof r=="string"?r:r?.address||""});c.useEffect(()=>{const i=typeof r=="string"?r:r?.address??"",o=typeof r=="object"&&r?.address!=null?r:{address:i,lat:p.lat,lng:p.lng};s(o),n(i,!1)},[r,n]);const j=async i=>{n(i,!1),f();try{const o=await R({address:i}),{lat:t,lng:k}=await $(o[0]),v={address:i,lat:t,lng:k};s(v),x(v)}catch(o){console.error("Error: ",o)}},b=c.useMemo(()=>({lat:l.lat||p.lat,lng:l.lng||p.lng}),[l]);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx(z,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-secondary/40"}),e.jsx("input",{value:u,onChange:i=>n(i.target.value),disabled:!h,placeholder:"Search location...",className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl pl-12 pr-4 py-3 text-sm font-bold focus:outline-none focus:border-primary transition-all placeholder:text-secondary/30 text-[var(--text)]"}),e.jsx(w,{children:m==="OK"&&e.jsx(g.ul,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-paper border border-secondary/10 rounded-2xl shadow-xl overflow-hidden max-h-60 overflow-y-auto z-20",children:d.map(({place_id:i,description:o})=>e.jsxs("li",{onClick:()=>j(o),className:"px-4 py-3 hover:bg-secondary/5 cursor-pointer text-sm font-medium text-secondary truncate flex items-center gap-2",children:[e.jsx(E,{size:14,className:"text-secondary/40 flex-shrink-0"}),o]},i))})})]}),e.jsx("div",{className:"h-48 w-full rounded-2xl overflow-hidden border border-secondary/10 relative",children:e.jsx(A,{mapContainerStyle:K,zoom:14,center:b,options:U,onClick:()=>{},children:e.jsx(D,{position:b})})})]})},B=({onClose:r,onSubmit:x})=>{const[a,l]=c.useState({title:"",date:"2026-02-15",time:"19:00",location:"",type:"free",price:0,category:"Food & Drinks",image:""}),[s,h]=c.useState({}),[u,m]=c.useState(null),[d,n]=c.useState(!1);S(!0,r);const f=L(!0),j=()=>{const t={};return a.title.trim()||(t.title="Title is required"),a.location.trim()||(t.location="Location is required"),a.type==="ticketed"&&a.price<=0&&(t.price="Price must be greater than 0"),h(t),Object.keys(t).length===0},b=async()=>{if(!d&&j()){n(!0);try{await x({...a,image:a.image||"https://images.unsplash.com/photo-1529543544277-750e0c7e4d18?w=800&q=80"})}finally{n(!1)}}},i=t=>{l({...a,image:t}),m(t||null)},o=T.filter(t=>t.id!=="All");return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-label":"Create event",ref:f,children:[e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-secondary/60 backdrop-blur-sm"}),e.jsxs(g.div,{initial:{y:50,opacity:0,scale:.9},animate:{y:0,opacity:1,scale:1},exit:{y:50,opacity:0,scale:.9},className:"bg-paper w-full max-w-md rounded-[32px] overflow-hidden border border-secondary/10 shadow-2xl relative z-50 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-paper p-6 pb-4 border-b border-secondary/10 z-10",children:[e.jsx("button",{onClick:r,className:"absolute top-6 right-6 text-secondary/30 hover:text-secondary transition-colors active:scale-90","aria-label":"Close",children:e.jsx(N,{size:24,strokeWidth:2.5})}),e.jsxs("h2",{className:"text-2xl font-black tracking-tight text-secondary",children:["Create Event",e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("p",{className:"text-xs text-secondary/50 font-medium mt-1",children:"Share your vibe with the community"})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"event-image",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Cover Image"}),u?e.jsxs("div",{className:"relative rounded-2xl overflow-hidden",children:[e.jsx("img",{src:u,alt:"Preview",className:"w-full h-40 object-cover",loading:"lazy",onError:()=>m(null)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-secondary/50 to-transparent","aria-hidden":"true"}),e.jsx("button",{onClick:()=>i(""),className:"absolute top-2 right-2 w-8 h-8 rounded-full bg-secondary/70 flex items-center justify-center text-white hover:bg-secondary/90","aria-label":"Remove image",children:e.jsx(N,{size:16})})]}):e.jsxs("div",{className:"relative",children:[e.jsx(P,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-secondary/40","aria-hidden":"true"}),e.jsx("input",{id:"event-image",type:"url",placeholder:"Paste image URL...",value:a.image,onChange:t=>i(t.target.value),className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl pl-12 pr-4 py-4 text-sm font-medium focus:outline-none focus:border-primary transition-all placeholder:text-secondary/30"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"event-title",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Event Title"}),e.jsx("input",{id:"event-title",type:"text",placeholder:"e.g. Friday Drinks at The Golden Lion",value:a.title,onChange:t=>l({...a,title:t.target.value}),className:`w-full bg-secondary/5 border rounded-2xl px-4 py-4 text-sm font-bold focus:outline-none focus:border-primary transition-all placeholder:text-secondary/30 ${s.title?"border-red-500":"border-secondary/10"}`,"aria-invalid":!!s.title,"aria-describedby":s.title?"title-error":void 0}),s.title&&e.jsxs("p",{id:"title-error",className:"text-xs text-red-500 flex items-center gap-1 ml-3",role:"alert",children:[e.jsx(y,{size:12})," ",s.title]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",id:"category-label",children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",role:"radiogroup","aria-labelledby":"category-label",children:o.slice(0,6).map(t=>e.jsxs("button",{role:"radio","aria-checked":a.category===t.id,onClick:()=>l({...a,category:t.id}),className:`px-3 py-2 rounded-xl text-xs font-bold flex items-center gap-1.5 transition-all ${a.category===t.id?"bg-primary text-white":"bg-secondary/5 text-secondary/70 border border-secondary/10 hover:border-secondary/30"}`,children:[e.jsx(t.icon,{size:14}),t.label]},t.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"event-date",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Date"}),e.jsx("input",{id:"event-date",type:"date",value:a.date,onChange:t=>l({...a,date:t.target.value}),className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl px-4 py-4 text-sm font-bold focus:outline-none focus:border-primary"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"event-time",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Time"}),e.jsx("input",{id:"event-time",type:"time",value:a.time,onChange:t=>l({...a,time:t.target.value}),className:"w-full bg-secondary/5 border border-secondary/10 rounded-2xl px-4 py-4 text-sm font-bold focus:outline-none focus:border-primary"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Location"}),e.jsx(V,{apiKey:"your key (placeholder)",value:a.location,onChange:t=>{l(typeof t=="string"?{...a,location:t}:{...a,location:t.address,coordinates:{lat:t.lat,lng:t.lng}})}}),s.location&&e.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1 ml-3",role:"alert",children:[e.jsx(y,{size:12})," ",s.location]})]}),e.jsxs("div",{className:"flex bg-secondary/5 p-1.5 rounded-2xl border border-secondary/10",role:"radiogroup","aria-label":"Event pricing",children:[e.jsx("button",{role:"radio","aria-checked":a.type==="free",onClick:()=>l({...a,type:"free",price:0}),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${a.type==="free"?"bg-primary text-white shadow-lg":"text-secondary/50"}`,children:"Free"}),e.jsx("button",{role:"radio","aria-checked":a.type==="ticketed",onClick:()=>l({...a,type:"ticketed",price:10}),className:`flex-1 py-3 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${a.type==="ticketed"?"bg-primary text-white shadow-lg":"text-secondary/50"}`,children:"Ticketed"})]}),e.jsx(w,{children:a.type==="ticketed"&&e.jsxs(g.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[e.jsx("label",{htmlFor:"event-price",className:"text-[10px] font-black text-secondary/50 uppercase tracking-widest ml-3",children:"Ticket Price (Â£)"}),e.jsx("input",{id:"event-price",type:"number",min:"1",value:a.price,onChange:t=>l({...a,price:Number(t.target.value)}),className:`w-full bg-secondary/5 border rounded-2xl px-4 py-4 text-lg font-black focus:outline-none focus:border-primary ${s.price?"border-red-500":"border-secondary/10"}`,"aria-invalid":!!s.price,"aria-describedby":s.price?"price-error":void 0}),s.price&&e.jsxs("p",{id:"price-error",className:"text-xs text-red-500 flex items-center gap-1 ml-3",role:"alert",children:[e.jsx(y,{size:12})," ",s.price]}),e.jsx("p",{className:"text-[10px] text-secondary/40 ml-3",children:"5% platform fee applies to ticketed events"})]})})]}),e.jsx("div",{className:"sticky bottom-0 bg-paper p-6 pt-4 border-t border-secondary/10",children:e.jsx("button",{onClick:b,disabled:d,className:`w-full py-4 bg-gradient-to-r from-primary to-accent rounded-2xl font-black uppercase tracking-widest shadow-lg text-white flex items-center justify-center gap-2 active:scale-[0.98] transition-transform ${d?"opacity-60 cursor-not-allowed":""}`,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Publishing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{size:18}),"Publish Event"]})})})]})]})};export{B as default};
