import{a as c,j as e,m as i,A as D}from"./vendor-motion-CtvpaCTF.js";import{o as j,a as v,F as U,g as M,O as N,X as G,J as w,h as H,i as W,j as k,k as Y,l as _,m as J,s as S}from"./index-CHSGdoHa.js";import{L as K}from"./link-2-C2bDXNTT.js";import"./vendor-maps-DdmUqcD-.js";function Z(){const C=j(s=>s.user),O=j(s=>s.setUser),L=v(s=>s.setShowOrganiserSetup),y=v(s=>s.showToast),[a,b]=c.useState(0),[n,z]=c.useState(C?.name||""),[o,T]=c.useState(""),[l,$]=c.useState([]),[u,E]=c.useState({}),[d,g]=c.useState(!1),m=()=>L(!1);U(m);const I=M.filter(s=>s.id!=="All"),A=s=>{_(),$(t=>t.includes(s)?t.filter(r=>r!==s):[...t,s])},B=(s,t)=>{E(r=>({...r,[s]:t}))},R=(s,t)=>{if(!t?.trim())return null;const r=t.trim();if(s==="website"){if(!/^https?:\/\/.+\..+/.test(r))return"Enter a valid URL (https://...)"}else if(/\s/.test(r))return"Usernames cannot contain spaces";return null},f=N.reduce((s,t)=>{const r=R(t.key,u[t.key]);return r&&(s[t.key]=r),s},{}),F=Object.keys(f).length>0,p=()=>a===0?n.trim().length>=2:a===1?l.length>=1:a===2?!F:!0,P=async()=>{if(!d){g(!0),J();try{await S.switchRole("organiser");const s=await S.updateProfile({organiserDisplayName:n.trim(),organiserBio:o.trim(),organiserCategories:l,organiserSocialLinks:Object.fromEntries(Object.entries(u).filter(([,t])=>t.trim())),organiserSetupComplete:!0});O(s),y("Welcome, organiser! Your profile is set up.","success"),m()}catch(s){y(s.message||"Failed to set up organiser profile","error")}finally{g(!1)}}},h=[{title:"Become an Organiser",subtitle:"Set up your organiser identity",desc:"This is how attendees will see you"},{title:"What do you host?",subtitle:"Pick your event categories",desc:"Select at least 1 category"},{title:"Tell people about you",subtitle:"Bio & social links",desc:"Help attendees find and trust you"}];return e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-paper flex flex-col",role:"dialog","aria-modal":"true","aria-label":"Organiser profile setup",children:[e.jsxs("div",{className:"p-6 pt-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"flex gap-2 flex-1",children:["Identity","Categories","Details"].map((s,t)=>e.jsxs("div",{className:"flex-1",children:[e.jsx(i.div,{className:"h-1.5 rounded-full overflow-hidden bg-secondary/10",children:e.jsx(i.div,{initial:{width:0},animate:{width:t<=a?"100%":"0%"},transition:{duration:.3},className:"h-full bg-primary rounded-full"})}),e.jsx("p",{className:`text-[8px] font-bold uppercase tracking-widest mt-1 text-center transition-colors duration-300 ${t<=a?"text-primary":"text-secondary/30"}`,children:s})]},t))}),e.jsx("button",{onPointerDown:m,className:"ml-4 w-10 h-10 rounded-full bg-secondary/10 flex items-center justify-center hover:bg-secondary/20 transition-colors focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:outline-none","aria-label":"Close",children:e.jsx(G,{size:20,className:"text-secondary/60"})})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("h1",{className:"text-3xl font-black tracking-tight text-primary mb-1",children:[h[a].title,e.jsx("span",{className:"text-accent",children:"."})]}),e.jsx("h2",{className:"text-xl font-bold text-secondary/80 mb-2",children:h[a].subtitle}),e.jsx("p",{className:"text-sm text-secondary/50 text-balance",children:h[a].desc})]},a)]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto p-6 scroll-smooth",style:{overscrollBehavior:"contain"},children:e.jsxs(D,{mode:"wait",children:[a===0&&e.jsxs(i.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs(i.div,{initial:{scale:0,rotate:-20},animate:{scale:1,rotate:0},transition:{type:"spring",damping:12,stiffness:200},className:"w-24 h-24 rounded-[32px] bg-primary/10 border-2 border-primary/20 flex items-center justify-center relative",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/5 rounded-[32px] animate-pulse","aria-hidden":"true"}),e.jsx(w,{size:40,className:"text-primary relative","aria-hidden":"true"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-secondary/60 uppercase tracking-widest mb-2 block",children:"Display Name"}),e.jsx("input",{type:"text",placeholder:"How attendees will see you",value:n,onChange:s=>z(s.target.value),className:"w-full bg-secondary/5 border-2 border-secondary/20 rounded-2xl px-4 py-4 text-lg font-medium text-[var(--text)] focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/10 hover:border-secondary/30 transition-all placeholder:text-secondary/40",maxLength:50,autoFocus:!0,autoComplete:"name",autoCapitalize:"words",spellCheck:"false"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex-1 h-0.5 bg-secondary/10 rounded-full overflow-hidden",children:e.jsx(i.div,{className:`h-full rounded-full ${n.length>=2?"bg-green-500/60":"bg-primary/40"}`,animate:{width:`${Math.min(n.length/50*100,100)}%`},transition:{duration:.2}})}),e.jsxs("span",{className:`text-[10px] font-bold tabular-nums ${n.length>=2?"text-green-600":"text-secondary/40"}`,children:[n.length,"/50"]})]})]}),e.jsx("div",{className:"premium-card p-4 rounded-[24px] border border-transparent hover:border-primary/10 transition-colors duration-200",style:{contain:"layout style"},children:e.jsx("p",{className:"text-sm text-secondary/70 font-medium leading-relaxed text-balance hyphens-auto",lang:"en",children:"As an organiser, you can create events, build communities, and track your performance. You can switch back to attendee mode any time."})})]},"identity"),a===1&&e.jsxs(i.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-[10px] font-bold text-secondary/40",children:"Tap to select"}),e.jsxs(i.span,{initial:{scale:1.3},animate:{scale:1},className:`text-[10px] font-black px-2 py-0.5 rounded-full tabular-nums ${l.length>=1?"text-green-600 bg-green-500/10":"text-secondary/40 bg-secondary/5"}`,children:[l.length," selected"]},l.length)]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:I.map((s,t)=>{const r=l.includes(s.id),x=s.icon;return e.jsxs(i.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2,delay:t*.03},whileTap:{scale:.95},onClick:()=>A(s.id),className:`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:outline-none ${r?"bg-primary/10 border-primary text-primary":"bg-secondary/5 border-secondary/20 text-secondary/70 hover:border-secondary/40"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${r?"bg-primary/20":"bg-secondary/10"}`,children:x&&e.jsx(x,{size:24,"aria-hidden":"true"})}),e.jsx("span",{className:"text-sm font-bold",children:s.label}),r&&e.jsx(i.div,{initial:{scale:0},animate:{scale:1},children:e.jsx(H,{size:16,className:"text-primary","aria-hidden":"true"})})]},s.id)})})]},"categories"),a===2&&e.jsxs(i.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-secondary/60 uppercase tracking-widest mb-2 block",children:"Organiser Bio"}),e.jsx("textarea",{placeholder:"Tell people what kind of events you host and what makes them special...",value:o,onChange:s=>T(s.target.value),className:"w-full bg-secondary/5 border-2 border-secondary/20 rounded-2xl px-4 py-3 text-sm font-medium text-[var(--text)] focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/10 hover:border-secondary/30 transition-all placeholder:text-secondary/40 min-h-[100px] resize-none",maxLength:300,autoCapitalize:"sentences",style:{overflowWrap:"break-word",wordBreak:"break-words"}}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex-1 h-0.5 bg-secondary/10 rounded-full overflow-hidden",children:e.jsx(i.div,{className:`h-full rounded-full ${o.length>250?"bg-amber-500/60":"bg-primary/40"}`,animate:{width:`${Math.min(o.length/300*100,100)}%`},transition:{duration:.2}})}),e.jsxs("span",{className:`text-[10px] font-bold tabular-nums ${o.length>250?"text-amber-500":"text-secondary/40"}`,children:[o.length,"/300"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-black text-secondary/60 uppercase tracking-widest mb-3 block",children:["Social Links ",e.jsx("span",{className:"text-secondary/30",children:"(optional)"})]}),e.jsx("div",{className:"space-y-3",children:N.map(s=>{const t=f[s.key],r=u[s.key]?.trim();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 border transition-colors ${r?"bg-green-500/5 border-green-500/20":"bg-secondary/5 border-secondary/10"}`,children:e.jsx(K,{size:16,className:r?"text-green-600":"text-secondary/50"})}),e.jsx("input",{type:s.key==="website"?"url":"text",placeholder:s.placeholder,value:u[s.key]||"",onChange:x=>B(s.key,x.target.value),autoComplete:"off",autoCapitalize:"none",spellCheck:"false",className:`flex-1 bg-secondary/5 border rounded-xl px-3 py-2.5 text-sm font-medium text-[var(--text)] focus:outline-none focus:ring-2 focus:ring-primary/10 transition-all placeholder:text-secondary/40 ${t?"border-red-400 focus:border-red-500":"border-secondary/20 focus:border-primary hover:border-secondary/30"}`})]}),t&&e.jsx("p",{className:"text-[10px] text-red-500/70 mt-0.5 ml-[52px] font-medium",children:t})]},s.key)})})]})]},"bio-links")]})}),e.jsxs("div",{className:"p-6 flex gap-3 pb-[max(40px,env(safe-area-inset-bottom))] isolate",children:[a>0&&e.jsx(i.button,{onClick:()=>{k(),b(a-1)},whileHover:{scale:1.05,transition:{duration:.12}},whileTap:{scale:.93},className:"w-14 h-14 rounded-2xl bg-secondary/10 flex items-center justify-center hover:bg-secondary/20 transition-colors focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:outline-none","aria-label":"Go back",children:e.jsx(W,{size:24,className:"text-secondary"})}),e.jsxs(i.button,{onClick:()=>{k(),a<2?b(a+1):P()},disabled:!p()||d,whileTap:p()&&!d?{scale:.97}:{},className:"flex-1 h-14 rounded-2xl bg-gradient-to-r from-primary to-accent text-white font-black uppercase tracking-widest flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-transform relative overflow-hidden focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:outline-none [backface-visibility:hidden]",children:[a===2&&p()&&!d&&e.jsx(i.div,{className:"absolute inset-0 bg-white/10 rounded-2xl",animate:{opacity:[0,.3,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),d?e.jsx(i.div,{animate:{rotate:360},transition:{repeat:1/0,duration:.8,ease:"linear"},className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full"}):a<2?e.jsxs(e.Fragment,{children:["Continue",e.jsx(Y,{size:20})]}):e.jsxs(e.Fragment,{children:["Start Organising",e.jsx(w,{size:20})]})]})]})]})}export{Z as default};
